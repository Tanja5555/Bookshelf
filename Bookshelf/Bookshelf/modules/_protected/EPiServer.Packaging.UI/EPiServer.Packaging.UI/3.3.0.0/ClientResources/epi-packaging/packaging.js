//>>built
require({cache:{"epi-packaging/layers/packaging":function(){require(["epi-packaging/AntiForgeryData","epi-packaging/DetailedView","epi-packaging/GallerySection","epi-packaging/InstalledSection","epi-packaging/LinkButton","epi-packaging/ModulesList","epi-packaging/ModuleSummary","epi-packaging/NavigationMenu","epi-packaging/PackagesGrid","epi-packaging/PackageUpload","epi-packaging/RestartSite","epi-packaging/RootContainer","epi-packaging/SelectedFiles","epi-packaging/SiteRestartWarning","epi-packaging/Toolbar","epi-packaging/Notification","epi-packaging/UpdateableSection","epi-packaging/UploadResults","epi-packaging/UploadSection","epi/shell/widget/ApplicationContentPane"]);},"epi-packaging/AntiForgeryData":function(){define("epi-packaging/AntiForgeryData",["dojo"],function(_1){return _1.declare(null,{_keyName:null,_keyValue:null,_antiForgeryToken:null,constructor:function(_2){var _3=_1.create("div");this._antiForgeryToken=_2;_3.innerHTML=this._antiForgeryToken;var _4=_1.query("input",_3)[0];this._keyName=_1.attr(_4,"name");this._keyValue=_1.attr(_4,"value");},GetKeyName:function(){return this._keyName;},GetKeyValue:function(){return this._keyValue;},GetTokenNode:function(){return this._antiForgeryToken;},AddAntiforgeryToken:function(_5){var _6={};_6[this._keyName]=this._keyValue;_1.mixin(_5,_6);return _5;}});});},"epi-packaging/DetailedView":function(){require({cache:{"url:epi-packaging/templates/DetailedView.htm":"<div class=\"epi-packaging-detailedViewContainer epi-TabContainerWrapper\" data-dojo-attach-point=\"contentContainer\">\r\n    <div data-dojo-attach-point=\"tabContainer\" data-dojo-type=\"dijit/layout/TabContainer\">\r\n        <div class=\"epi-dialogPadding\" data-dojo-type=\"dijit/layout/ContentPane\" title=\"${res.tab.title.overview}\"  selected=\"true\">\r\n            <h4>${res.tab.content.about}</h4>\r\n            <p data-dojo-attach-point=\"overviewAboutContent\"></p>\r\n            \r\n            <h4>${res.tab.content.releasenotes}</h4>\r\n            <p data-dojo-attach-point=\"overviewReleaseNotesContent\"></p>\r\n            <span style=\"display:block\">\r\n                <h4>${res.tab.content.installationmode.title}</h4>\r\n                <p data-dojo-attach-point=\"overviewInstallationModeNotesContent\"></p>\r\n            </span>\r\n        </div>\r\n        <div class=\"epi-dialogPadding\" data-dojo-type=\"dijit/layout/ContentPane\" title=\"${res.tab.title.specs}\">\r\n            <ul data-dojo-attach-point=\"specItemList\"></ul>\r\n        </div>\r\n        <div class=\"epi-dialogPadding epi-dependenciesTabContainer\" data-dojo-type=\"dijit/layout/ContentPane\" title=\"${res.tab.title.dependencies}\">\r\n            <div data-dojo-attach-point=\"dependenciesContent\"></div>\r\n            <div data-dojo-attach-point=\"dependenciesList\" data-dojo-type=\"epi-packaging/DependenciesGrid\"></div>\r\n        </div>\r\n    </div>\r\n</div>"}});define("epi-packaging/DetailedView",["epi","epi/datetime","dojo/_base/array","dojo/_base/declare","dojo/_base/lang","dojo/dom-geometry","dojo/dom-style","dijit","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dijit/layout/_LayoutWidget","dijit/layout/TabContainer","dijit/layout/ContentPane","epi/shell/widget/_ActionProviderWidget","dojo/text!./templates/DetailedView.htm","epi-packaging/DependenciesGrid","epi/i18n!epi/packaging/nls/EPiServer.Packaging.UI.DetailedView"],function(_7,_8,_9,_a,_b,_c,_d,_e,_f,_10,_11,_12,_13,_14,_15,_16,res){return _a([_11,_f,_10,_14],{currentPackage:null,installHandler:null,updateHandler:null,unInstallHandler:null,disableHandler:null,enableHandler:null,closeHandler:null,res:res,templateString:_15,_specItemTemplate:"<li>                                <span class='epi-specItemLabel'>{specItemLabel}</span>                                <span class='epi-specItemValue'>{specItemValue}</span>                            </li>",_toolbar:null,postCreate:function(){this.inherited(arguments);if(!this.currentPackage){return;}this._loadOverviewTabContent();this._loadSpecsTabContent();this._loadDependenciesTabContent();},startup:function(){this.inherited(arguments);},layout:function(){this.inherited(arguments);this._contentBox.h=_c.position(this.contentContainer.parentNode).h;this.tabContainer.resize(this._contentBox);if(!this.currentPackage||!this.currentPackage.dependencies||this.currentPackage.dependencies.length<1){this.dependenciesContent.innerHTML=this.res.tab.dependencies.nodependencies;}},_hideTab:function(_17){_9.forEach(this.tabContainer.tablist.getChildren(),_b.hitch(this,function(_18,_19,_1a){if(_18.label===_17){_d.set(_18.domNode,{display:"none"});return;}}));},_loadOverviewTabContent:function(){this.overviewAboutContent.innerHTML=this.currentPackage.description||"";this.overviewReleaseNotesContent.innerHTML=this.currentPackage.releaseNotes||"";if(this.currentPackage.isShellModule){this.overviewInstallationModeNotesContent.innerHTML=this.currentPackage.installationModeNotes||"";this.overviewInstallationModeNotesContent.parentNode.style.display="block";}else{this.overviewInstallationModeNotesContent.parentNode.style.display="none";}},_loadDependenciesTabContent:function(){this.dependenciesList.data=this.currentPackage.dependencies;},_loadSpecsTabContent:function(){var _1b="";if(this.currentPackage.versionInstalled){if(this.currentPackage.version==this.currentPackage.versionLatestAvailable&&this.currentPackage.isInstalled){_1b+=this._addSpecItems(this.res.tab.content.status,"<span class='epi-installationStatusIcon epi-installedStatusIcon'></span>"+this.res.tab.content.installed);}else{if(this.currentPackage.isDisabled){_1b+=this._addSpecItems(this.res.tab.content.status,"<span class='epi-installationStatusIcon epi-disabledStatusIcon'></span>"+this.res.tab.content.disabled);}else{_1b+=this._addSpecItems(this.res.tab.content.status,"<span class='epi-installationStatusIcon epi-newVersionStatusIcon'></span>"+_b.replace(this.res.tab.content.priorversioninstalled,{priorversion:this.currentPackage.versionInstalled}));}}}else{_1b+=this._addSpecItems(this.res.tab.content.status,"<span class='epi-installationStatusIcon epi-notInstalledStatusIcon'></span>"+this.res.tab.content.notinstalled);}var _1c=_8.toUserFriendlyHtml(this.currentPackage.installDate);_1b+=this._addSpecItems(this.res.tab.content.installationdate,_1c||this.res.tab.content.notavailable);_1b+=this._addSpecItems(this.res.tab.content.installedby,this.currentPackage.installedBy||this.res.tab.content.notavailable);_1b+=this._addSpecItems(this.res.tab.content.version,this.currentPackage.version||"");_1b+=this._addSpecItems(this.res.tab.content.releaseby,this.currentPackage.authors||"");var _1d=_9.map(this.currentPackage.tags,function(_1e){return " \""+_1e+"\"";});_1b+=this._addSpecItems(this.res.tab.content.tags,_1d||"");this.specItemList.innerHTML=_1b;},_addSpecItems:function(_1f,_20){return _b.replace(this._specItemTemplate,{specItemLabel:_1f,specItemValue:_20});},getActions:function(){if(!this.currentPackage){return [];}this._actions=[];if(this.currentPackage.actionsAvailable.install){this.addActions({name:"install",label:_7.resources.action.install,action:_b.hitch(this,this.installHandler)});}if(this.currentPackage.actionsAvailable.update||this.currentPackage.actionsAvailable.installAsUpdate){this.addActions({name:"update",label:_7.resources.action.update,action:_b.hitch(this,this.updateHandler)});}if(this.currentPackage.actionsAvailable.enable){this.addActions({name:"enable",label:res.enablebutton,action:_b.hitch(this,this.enableHandler)});}if(this.currentPackage.actionsAvailable.disable){this.addActions({name:"disable",label:res.disablebutton,action:_b.hitch(this,this.disableHandler)});}if(this.currentPackage.actionsAvailable.uninstall){this.addActions({name:"uninstall",label:_7.resources.action.uninstall,action:_b.hitch(this,this.unInstallHandler)});}this.addActions({name:"close",label:_7.resources.action.close,action:_b.hitch(this,this._closeClick)});return this._actions;},_closeClick:function(){if(this.closeHandler){this.closeHandler();}}});});},"url:epi-packaging/templates/DetailedView.htm":"<div class=\"epi-packaging-detailedViewContainer epi-TabContainerWrapper\" data-dojo-attach-point=\"contentContainer\">\r\n    <div data-dojo-attach-point=\"tabContainer\" data-dojo-type=\"dijit/layout/TabContainer\">\r\n        <div class=\"epi-dialogPadding\" data-dojo-type=\"dijit/layout/ContentPane\" title=\"${res.tab.title.overview}\"  selected=\"true\">\r\n            <h4>${res.tab.content.about}</h4>\r\n            <p data-dojo-attach-point=\"overviewAboutContent\"></p>\r\n            \r\n            <h4>${res.tab.content.releasenotes}</h4>\r\n            <p data-dojo-attach-point=\"overviewReleaseNotesContent\"></p>\r\n            <span style=\"display:block\">\r\n                <h4>${res.tab.content.installationmode.title}</h4>\r\n                <p data-dojo-attach-point=\"overviewInstallationModeNotesContent\"></p>\r\n            </span>\r\n        </div>\r\n        <div class=\"epi-dialogPadding\" data-dojo-type=\"dijit/layout/ContentPane\" title=\"${res.tab.title.specs}\">\r\n            <ul data-dojo-attach-point=\"specItemList\"></ul>\r\n        </div>\r\n        <div class=\"epi-dialogPadding epi-dependenciesTabContainer\" data-dojo-type=\"dijit/layout/ContentPane\" title=\"${res.tab.title.dependencies}\">\r\n            <div data-dojo-attach-point=\"dependenciesContent\"></div>\r\n            <div data-dojo-attach-point=\"dependenciesList\" data-dojo-type=\"epi-packaging/DependenciesGrid\"></div>\r\n        </div>\r\n    </div>\r\n</div>","epi-packaging/DependenciesGrid":function(){define("epi-packaging/DependenciesGrid",["dojo/_base/declare","dojo/dom-style","dojo/dom-construct","dijit/_WidgetBase","dgrid/Grid","dgrid/extensions/DijitRegistry","dgrid/extensions/ColumnResizer","dijit/layout/ContentPane","epi/i18n!epi/packaging/nls/EPiServer.Packaging.UI.DetailedView.Tab.Dependencies"],function(_21,_22,_23,_24,_25,_26,_27,_28,res){return _21([_24],{res:res,data:null,gridWidget:null,postCreate:function(){this.inherited(arguments);var _29=_23.create("div");_23.place(_29,this.domNode);var _2a=_23.create("div",null,_29);var _2b={name:{label:res.name},version:{label:res.version},releasedBy:{label:res.releasedby}};this.gridWidget=new (_21([_25,_26,_27]))({columns:_2b},_2a);},startup:function(){if(this._started){return;}this.inherited(arguments);if(this.data&&this.data.length>0){this.gridWidget.renderArray(this.data);}else{_22.set(this.gridWidget.domNode,{display:"none"});}},resize:function(_2c){this.inherited(arguments);this.gridWidget.resize(_2c);}});});},"dgrid/extensions/ColumnResizer":function(){define("dgrid/extensions/ColumnResizer",["dojo/_base/declare","dojo/on","dojo/query","dojo/_base/lang","dojo/dom","dojo/dom-geometry","dojo/has","../util/misc","put-selector/put","dojo/_base/html","xstyle/css!../css/extensions/ColumnResizer.css"],function(_2d,_2e,_2f,_30,dom,_31,has,_32,put){function _33(_34,_35,_36,_37,id){for(var i=1;i<_35;i++){_34[_36+i][_37]=id;}};function _38(_39){var i=_39.length,l=i,_3a=_39[0].length,_3b=new Array(i);while(i--){_3b[i]=new Array(_3a);}var _3c={};for(i=0;i<l;i++){var row=_3b[i],_3d=_39[i];for(var j=0,js=0;j<_3a;j++){var _3e=_3d[js],k;if(typeof row[j]!="undefined"){continue;}row[j]=_3e.id;if(_3e.rowSpan&&_3e.rowSpan>1){_33(_3b,_3e.rowSpan,i,j,_3e.id);}if(i>0&&_3e.colSpan&&_3e.colSpan>1){for(k=1;k<_3e.colSpan;k++){row[++j]=_3e.id;if(_3e.rowSpan&&_3e.rowSpan>1){_33(_3b,_3e.rowSpan,i,j,_3e.id);}}}_3c[_3e.id]=_39[0][j].id;js++;}}return _3c;};function _3f(_40,_41,_42,_43,_44){if(_42<=0){return;}var _45=_40.columns[_41],_46,_47;if(!_45){return;}_46={grid:_40,columnId:_41,width:_42,bubbles:true,cancelable:true};if(_43){_46.parentType=_43;}if(!_40._resizedColumns||_2e.emit(_40.headerNode,"dgrid-columnresize",_46)){if(_42==="auto"){delete _45.width;}else{_45.width=_42;_42+="px";}_47=_40._columnSizes[_41];if(_47){_47.set("width",_42);}else{_47=_32.addCssRule("#"+_32.escapeCssIdentifier(_40.domNode.id)+" .dgrid-column-"+_32.escapeCssIdentifier(_41,"-"),"width: "+_42+";");}_40._columnSizes[_41]=_47;if(_44!==false){_40.resize();}return true;}};var _48,_49=0;var _4a={create:function(){_48=put("div.dgrid-column-resizer");},destroy:function(){put(_48,"!");_48=null;},show:function(_4b){var pos=_31.position(_4b.domNode,true);_48.style.top=pos.y+"px";_48.style.height=pos.h+"px";put(document.body,_48);},move:function(x){_48.style.left=x+"px";},hide:function(){_48.parentNode.removeChild(_48);}};return _2d(null,{resizeNode:null,minWidth:40,adjustLastColumn:true,_resizedColumns:false,buildRendering:function(){this.inherited(arguments);if(!_49++){_4a.create();}},destroy:function(){this.inherited(arguments);for(var _4c in this._columnSizes){this._columnSizes[_4c].remove();}if(!--_49){_4a.destroy();}},resizeColumnWidth:function(_4d,_4e){return _3f(this,_4d,_4e);},configStructure:function(){var _4f=this._oldColumnSizes=_30.mixin({},this._columnSizes),k;this._resizedColumns=false;this._columnSizes={};this.inherited(arguments);for(k in _4f){if(!(k in this._columnSizes)){_4f[k].remove();}}delete this._oldColumnSizes;},_configColumn:function(_50){this.inherited(arguments);var _51=_50.id,_52;if("width" in _50){if((_52=this._oldColumnSizes[_51])){_52.set("width",_50.width+"px");}else{_52=_32.addCssRule("#"+_32.escapeCssIdentifier(this.domNode.id)+" .dgrid-column-"+_32.escapeCssIdentifier(_51,"-"),"width: "+_50.width+"px;");}this._columnSizes[_51]=_52;}},renderHeader:function(){this.inherited(arguments);var _53=this;var _54;if(this.columnSets&&this.columnSets.length){var csi=this.columnSets.length;while(csi--){_54=_30.mixin(_54||{},_38(this.columnSets[csi]));}}else{if(this.subRows&&this.subRows.length>1){_54=_38(this.subRows);}}var _55=_2f(".dgrid-cell",_53.headerNode),i=_55.length;while(i--){var _56=_55[i],id=_56.columnId,col=_53.columns[id],_57=_56.childNodes,_58;if(!col||col.resizable===false){continue;}var _59=put("div.dgrid-resize-header-container");_56.contents=_59;while(_57.length>0){put(_59,_57[0]);}_58=put(_56,_59,"div.dgrid-resize-handle.resizeNode-"+_32.escapeCssIdentifier(id,"-"));_58.columnId=_54&&_54[id]||id;}if(!_53.mouseMoveListen){_2e(_53.headerNode,".dgrid-resize-handle:mousedown"+(has("touch")?",.dgrid-resize-handle:touchstart":""),function(e){_53._resizeMouseDown(e,this);_53.mouseMoveListen.resume();_53.mouseUpListen.resume();});_53._listeners.push(_53.mouseMoveListen=_2e.pausable(document,"mousemove"+(has("touch")?",touchmove":""),_32.throttleDelayed(function(e){_53._updateResizerPosition(e);})));_53._listeners.push(_53.mouseUpListen=_2e.pausable(document,"mouseup"+(has("touch")?",touchend":""),function(e){_53._resizeMouseUp(e);_53.mouseMoveListen.pause();_53.mouseUpListen.pause();}));_53.mouseMoveListen.pause();_53.mouseUpListen.pause();}},_resizeMouseDown:function(e,_5a){e.preventDefault();dom.setSelectable(this.domNode,false);this._startX=this._getResizeMouseLocation(e);this._targetCell=_2f(".dgrid-column-"+_32.escapeCssIdentifier(_5a.columnId,"-"),this.headerNode)[0];this._updateResizerPosition(e);_4a.show(this);},_resizeMouseUp:function(e){var _5b=this._columnSizes,_5c,_5d,_5e;if(this.adjustLastColumn){_5e=this.headerNode.clientWidth-1;}if(!this._resizedColumns){_5c=_2f(".dgrid-cell",this.headerNode);if(this.columnSets&&this.columnSets.length){_5c=_5c.filter(function(_5f){var idx=_5f.columnId.split("-");return idx[0]=="0"&&!(_5f.columnId in _5b);});}else{if(this.subRows&&this.subRows.length>1){_5c=_5c.filter(function(_60){return _60.columnId.charAt(0)=="0"&&!(_60.columnId in _5b);});}}_5d=_5c.map(function(_61){return _61.offsetWidth;});_5c.forEach(function(_62,i){_3f(this,_62.columnId,_5d[i],null,false);},this);this._resizedColumns=true;}dom.setSelectable(this.domNode,true);var _63=this._targetCell,_64=this._getResizeMouseLocation(e)-this._startX,_65=_63.offsetWidth+_64,obj=this._getResizedColumnWidths(),_66=obj.totalWidth,_67=obj.lastColId,_68=_2f(".dgrid-column-"+_32.escapeCssIdentifier(_67,"-"),this.headerNode)[0].offsetWidth;if(_65<this.minWidth){_65=this.minWidth;}if(_3f(this,_63.columnId,_65,e.type)){if(_63.columnId!=_67&&this.adjustLastColumn){if(_66+_64<_5e){_3f(this,_67,"auto",e.type);}else{if(_68-_64<=this.minWidth){_3f(this,_67,this.minWidth,e.type);}}}}_4a.hide();delete this._startX;delete this._targetCell;},_updateResizerPosition:function(e){if(!this._targetCell){return;}var _69=this._getResizeMouseLocation(e),_6a=_69-this._startX,_6b=this._targetCell.offsetWidth,_6c=_69;if(_6b+_6a<this.minWidth){_6c=this._startX-(_6b-this.minWidth);}_4a.move(_6c);},_getResizeMouseLocation:function(e){var _6d=0;if(e.pageX){_6d=e.pageX;}else{if(e.clientX){_6d=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft;}}return _6d;},_getResizedColumnWidths:function(){var _6e=0,_6f=_2f((this.columnSets?".dgrid-column-set-cell ":"")+"tr:first-child .dgrid-cell",this.headerNode);var i=_6f.length;if(!i){return {};}var _70=_6f[i-1].columnId;while(i--){_6e+=_6f[i].offsetWidth;}return {totalWidth:_6e,lastColId:_70};}});});},"epi-packaging/GallerySection":function(){require({cache:{"url:epi-packaging/templates/Section.htm":"<div style=\"overflow:auto;\">\r\n    <div data-dojo-attach-point=\"_headerPlaceholder\"></div>\r\n    <div class=\"epi-newContentContainerInverted\">\r\n        <div data-dojo-attach-point=\"_contentPlaceholder\"></div>\r\n    </div>\r\n</div>"}});define("epi-packaging/GallerySection",["dojo","dijit","dijit/layout/_LayoutWidget","dijit/_TemplatedMixin","epi/routes","epi-packaging/SectionHeader","epi-packaging/ModulesList","dojo/text!./templates/Section.htm","epi/i18n!epi/packaging/nls/EPiServer.Packaging.UI.GallerySection","epi/i18n!epi/packaging/nls/EPiServer.Packaging.UI.Feeds"],function(_71,_72,_73,_74,_75,_76,_77,_78,res,_79){return _71.declare([_73,_74],{res:res,resFeeds:_79,templateString:_78,antiForgeryData:null,_headerWidget:null,_listWidget:null,startup:function(){if(this._started){return;}this._headerWidget=new _76({webHelpAlias:"availableaddons",antiForgeryData:this.antiForgeryData,sectionTitle:this.res.title},this._headerPlaceholder);this._headerWidget.startup();this._listWidget=new _77({antiForgeryData:this.antiForgeryData,hideModuleInListOnAction:false,emptyListMessage:this.res.emptylistmessage,listingUrl:_75.getActionPath({moduleArea:"EPiServer.Packaging.UI",controller:"AddOns",action:"GetInstallableModules"})},this._contentPlaceholder);this._listWidget.startup();this.connect(this._listWidget,"onSiteRestartRequired",function(){this._headerWidget.updateView();});this.connect(this._listWidget,"onError",function(_7a){this._headerWidget.addErrorMessages(_7a);});this.connect(this._listWidget,"onSuccess",function(_7b){this._headerWidget.addSuccessMessages(_7b);});this.connect(this._listWidget,"onModuleActionPerformed",function(){this._headerWidget.clearErrorMessages();this._headerWidget.clearSuccessMessages();});this.inherited(arguments);},updateView:function(_7c){var _7d=this.resFeeds[_7c.feedName.toLowerCase()];this._headerWidget.sectionTitle=_7d?_7d.title:_7c.feedName;this._headerWidget.description=_7d?_7d.description:"";this._headerWidget.clearErrorMessages();this._headerWidget.clearSuccessMessages();this._headerWidget.updateView();this._listWidget.feedName=_7c.feedName;this._listWidget.updateView();}});});},"epi-packaging/SectionHeader":function(){define(["dojo","dijit","dojo/cookie","dojo/html","dijit/_Widget","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dijit/Dialog","epi/shell/widget/HelpButton","epi-packaging/StatusMessageList","epi-packaging/RestartSite","dojox/widget/Standby","dojo/text!./templates/SectionHeader.htm","epi/i18n!epi/packaging/nls/EPiServer.Packaging.UI.SectionHeader"],function(_7e,_7f,_80,_81,_82,_83,_84,_85,_86,_87,_88,_89,_8a,res){return _7e.declare([_82,_83,_84],{res:res,templateString:_8a,sectionTitle:null,description:null,_titleNode:null,_descriptionNode:null,webHelpAlias:null,antiForgeryData:null,_helpButtonWidget:null,_restartWidget:null,_standbyWidget:null,startup:function(){if(this._started){return;}this._helpButtonWidget=new _86({moduleName:"CMS",webHelpAlias:this.webHelpAlias},this._helpButton);this._helpButtonWidget.startup();this._restartWidget=new _88({antiForgeryData:this.antiForgeryData},this._restartPlaceholder);this._restartWidget.startup();this.connect(this._restartWidget,"onRestartFinished",function(){var _8b=this._getStoredMessages();if(_8b){this._setReloadRequested();window.location.reload(true);}});this.connect(this._restartWidget,"onRestartCheckComplete",function(_8c){var _8d=this._getStoredMessages();if(_8d&&!_8c&&!this._isReloadRequested()){this._setReloadRequested();window.location.reload(true);}});this._standbyWidget=new _89({target:this._standbyPlaceholder});document.body.appendChild(this._standbyWidget.domNode);this._standbyWidget.startup();_7e.subscribe("onServerError",_7e.hitch(this,this._showServerError));_7e.subscribe("onReloadRequired",_7e.hitch(this,this._storeMessages));this.inherited(arguments);},updateView:function(){_81.set(this._titleNode,this.sectionTitle);_81.set(this._descriptionNode,this.description);this._displayStoredMessage();this._restartWidget.showIfRestartRequired();},_isReloadRequested:function(){var _8e=this._getItem("EPiPackagingPageReload");return _8e==="true";},_setReloadRequested:function(){this._storeItem("EPiPackagingPageReload","true");},_clearReloadRequested:function(){this._removeItem("EPiPackagingPageReload");},_displayStoredMessage:function(){var _8f=this._getStoredMessages();if(this._isReloadRequested()&&_8f){this.addSuccessMessages(_8f);this._clearReloadRequested();this._clearStoredMessages();}},_storeMessages:function(){var _90=this._successMessageList.messages;if(_90.length>0){this._storeItem("EPiPackagingStatusMessage",_7e.toJson(_90));}},_getStoredMessages:function(){var _91=this._getItem("EPiPackagingStatusMessage");if(!_91){return null;}if(_91==""){return null;}return _7e.fromJson(_91);},_clearStoredMessages:function(){this._removeItem("EPiPackagingStatusMessage");},_storeItem:function(key,_92){if(localStorage!==undefined){localStorage.setItem(key,_92);}else{_7e.cookie(key,_92);}},_getItem:function(key){var _93;if(localStorage!==undefined){_93=localStorage.getItem(key);}else{_93=_7e.cookie(key);}return _93;},_removeItem:function(key){if(localStorage!==undefined){localStorage.removeItem(key);}else{_7e.cookie(key,"",{expire:-1});}},showStandby:function(){this._standbyWidget.show();},hideStandby:function(){this._standbyWidget.hide();},addErrorMessages:function(_94){if(this._isReloadRequested()){return;}this._errorMessageList.addMessages(_94);},clearErrorMessages:function(){this._errorMessageList.clearMessages();},addSuccessMessages:function(_95){this._successMessageList.addMessages(_95);},clearSuccessMessages:function(){this._successMessageList.clearMessages();},_showServerError:function(_96){if(_96.processed){return;}if(this._isReloadRequested()){return;}_96.processed=true;var _97;try{_97=_96.xhr.getResponseHeader("X-EPiLogOnScreen");}catch(ex){}if(_97){window.location.reload();return;}var _98=_96.xhr.responseText;var div=_7e.byId("errorContainerDialog");if(div){_7e.destroy(div);}div=_7e.create("div",{id:"errorContainerDialog"},_7e.body());var _99=_7e.create("iframe",{width:"800px",height:"400px",id:"erroriframe"},div);var _9a=new _85({title:this.res.servererror,style:"width: 820px",content:div});_9a.show();var doc=_99.contentWindow.document;doc.open();doc.writeln(_98);doc.close();}});});},"epi-packaging/StatusMessageList":function(){define(["dojo","dijit","dijit/_Widget","dijit/_TemplatedMixin","epi"],function(_9b,_9c,_9d,_9e,epi){return _9b.declare([_9d,_9e],{templateString:"<div><ul data-dojo-attach-point=\"_errorList\"></ul></div>",messages:[],render:function(){_9b.empty(this._errorList);if(this.messages.length>0){_9b.forEach(this.messages,function(_9f){var li=_9b.create("li");li.innerHTML=_9f;this._errorList.appendChild(li);},this);_9b.style(this.domNode,"display","block");}else{_9b.style(this.domNode,"display","none");}},addMessages:function(_a0){for(i in _a0){this.messages.push(_a0[i]);}this.render();},clearMessages:function(){this.messages=[];this.render();}});});},"epi-packaging/RestartSite":function(){define("epi-packaging/RestartSite",["dojo","dijit","epi/routes","dijit/_Widget","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojox/widget/Standby","epi/shell/XhrWrapper","dojo/text!./templates/RestartSite.htm","epi/i18n!epi/packaging/nls/EPiServer.Packaging.UI.RestartSite"],function(_a1,_a2,_a3,_a4,_a5,_a6,_a7,_a8,_a9,res){return _a1.declare([_a4,_a5,_a6],{res:res,templateString:_a9,pingTimeout:5000,restartUrl:null,checkStatusUrl:null,antiForgeryData:null,_restartStandby:null,constructor:function(){if(_a3){this.restartUrl=_a3.getActionPath({moduleArea:"EPiServer.Packaging.UI",controller:"AddOns",action:"Restart"});this.checkStatusUrl=_a3.getActionPath({moduleArea:"EPiServer.Packaging.UI",controller:"AddOns",action:"CheckRestartRequired"});}this._xhr=new _a8();},postMixInProperties:function(){if(!this.restartUrl){console.error("restartUrl is not specified");}if(!this.checkStatusUrl){console.error("checkStatusUrl is not specified");}this.inherited(arguments);},startup:function(){_a1.connect(this.restartButton,"onClick",this,function(){this._requestRestart();});this.inherited(arguments);},hide:function(){_a1.style(this.domNode,"display","none");},show:function(){_a1.style(this.domNode,"display","block");},showIfRestartRequired:function(){var _aa={};this.antiForgeryData.AddAntiforgeryToken(_aa);this._xhr.xhrPost({content:_aa,url:this.checkStatusUrl,handleAs:"json",load:_a1.hitch(this,function(_ab){if(!_ab){return;}else{if(_ab.restartRequired==true){this.show();}else{this.hide();}this.onRestartCheckComplete(_ab.restartRequired==true);}}),error:_a1.hitch(this,function(err,_ac){_a1.publish("onServerError",[_ac]);this.hide();})});},onRestartFinished:function(){},onRestartCheckComplete:function(_ad){},_requestRestart:function(){if(!this._restartStandby){this._restartStandby=new _a7({target:this.domNode});document.body.appendChild(this._restartStandby.domNode);this._restartStandby.startup();}this._restartStandby.show();var _ae={};this.antiForgeryData.AddAntiforgeryToken(_ae);this._xhr.xhrPost({content:_ae,url:this.restartUrl,handleAs:"json",load:_a1.hitch(this,function(_af,_b0){if(_af.restartRequired){this.counter=0;this._ping();}else{this._restartStandby.hide();alert(this.res.restartfailedmessage);}}),error:_a1.hitch(this,function(err,_b1){this._restartStandby.hide();_a1.publish("onServerError",[_b1]);}),handle:function(){}});},_ping:function(){this.counter++;if(this.counter>100){this._restartStandby.hide();return;}setTimeout(_a1.hitch(this,function(){var _b2={};this.antiForgeryData.AddAntiforgeryToken(_b2);this._xhr.xhrPost({content:_b2,url:this.checkStatusUrl,handleAs:"json",load:_a1.hitch(this,function(_b3,_b4){if(_b3.restartRequired==true){this._ping();}else{this._restartStandby.hide();this.hide();this.onRestartFinished();}}),error:_a1.hitch(this,function(err,_b5){if(_b5.xhr.status==500){this._restartStandby.hide();_a1.publish("onServerError",[_b5]);}else{this._ping();}})});}),this.pingTimeout);}});});},"url:epi-packaging/templates/RestartSite.htm":"<div style=\"display: none;\" class=\"restartContainer\">\r\n    <span>${res.restartrequiredmessage}</span>\r\n    <input type=\"button\" dojoAttachPoint=\"restartButton\" data-dojo-type=\"dijit/form/Button\" label=\"${res.restartbuttonlabel}\"/>\r\n</div>","url:epi-packaging/templates/SectionHeader.htm":"<div style=\"overflow: auto;\">\r\n    <div class=\"epi-listingTopContainer\" data-dojo-attach-point=\"selectTypeNode\">\r\n        <h1 data-dojo-attach-point=\"_titleNode\">\r\n            ${sectionTitle}</h1>\r\n        <div data-dojo-attach-point=\"_descriptionNode\">\r\n            ${description}</div>\r\n        <div data-dojo-attach-point=\"_restartPlaceholder\">\r\n        </div>\r\n        <div data-dojo-attach-point=\"_successMessageList\" data-dojo-type=\"epi-packaging/StatusMessageList\"\r\n            class=\"epi-packaging-validationSummary epi-packaging-Note\">\r\n        </div>\r\n        <div data-dojo-attach-point=\"_errorMessageList\" data-dojo-type=\"epi-packaging/StatusMessageList\"\r\n            class=\"epi-errorText epi-packaging-validationSummary epi-packaging-Error\">\r\n        </div>\r\n        <div class=\"epi-packaging-preload-error\">\r\n        </div>\r\n        <div class=\"epi-packaging-preload-success\">\r\n        </div>\r\n    </div>\r\n</div>\r\n","epi-packaging/ModulesList":function(){define("epi-packaging/ModulesList",["dojo","dijit","dojo/cookie","dijit/_Widget","dijit/_TemplatedMixin","dojox/widget/Standby","epi/shell/XhrWrapper","epi-packaging/ModuleSummary","epi/i18n!epi/packaging/nls/EPiServer.Packaging.UI.ModulesList"],function(_b6,_b7,_b8,_b9,_ba,_bb,_bc,_bd,res){return _b6.declare([_b9,_ba],{res:res,antiForgeryData:null,templateString:"<div class=\"epi-listingContainer\"><ul data-dojo-attach-point=\"_modulesListPlaceholder\" class=\"epi-advancedListing\"></ul></div>",listItemTemplateString:null,listingUrl:null,feedName:null,hideModuleInListOnAction:false,emptyListMessage:"No add-on found.",_dataStore:null,_listItems:null,_standbyWigdet:null,constructor:function(){this._xhr=new _bc();},startup:function(){if(this._started){return;}this._standbyWigdet=this._createStandbyWidget();document.body.appendChild(this._standbyWigdet.domNode);this._standbyWigdet.startup();this.inherited(arguments);},_createStandbyWidget:function(){return new dojox.widget.Standby({target:this._modulesListPlaceholder});},destroy:function(){this._destroyModuleList();this._standbyWigdet.destroyRecursive(false);this.inherited(arguments);},updateView:function(){this._listModules(true);},onSiteRestartRequired:function(){},onError:function(_be){},onSuccess:function(_bf){},onModuleActionPerformed:function(){},_listModules:function(_c0){if(this.listingUrl==""){return;}if(!this._dataStore||_c0){var _c1={feedName:this.feedName};this.antiForgeryData.AddAntiforgeryToken(_c1);this._standbyWigdet.show();this._xhr.xhrPost({content:_c1,url:this.listingUrl,handleAs:"json",load:_b6.hitch(this,function(_c2,_c3){if(!_c2){return;}else{if(_c2.errors&&_c2.errors.length>0){this._showErrors(_c2.errors);}this._dataStore=new _b6.store.Memory({data:_c2.modules});this._buildModuleList();}}),error:_b6.hitch(this,function(_c4,_c5){var _c6=_b6.replace(this.res.addonlistreaderror,{error:_c4});this._showErrors([_c6]);_b6.publish("onServerError",[_c5]);}),handle:_b6.hitch(this,function(_c7,_c8){this._standbyWigdet.hide();})});}else{this._buildModuleList();}},_buildModuleList:function(){var _c9=this._dataStore.query({},{sort:[{attribute:"title",descending:false},{attribute:"versionMajor",descending:true},{attribute:"versionMinor",descending:true},{attribute:"versionBuild",descending:true},{attribute:"versionRevision",descending:true},{attribute:"versionSpecial",descending:false}]});this._renderModules(_c9);},_createModuleSummary:function(_ca,_cb){var li=_b6.create("li",{"class":"clearfix"},_cb);var div=_b6.create("div",{},li);return new _bd(_ca,div);},_renderModules:function(_cc){_b6.empty(this._modulesListPlaceholder);this._destroyModuleList();if(_cc.length==0){this._showEmptyListMessage();return;}_b6.forEach(_cc,function(_cd,i){var _ce={module:_cd,antiForgeryData:this.antiForgeryData,itemIndex:i};if(this.listItemTemplateString){_ce.templateString=this.listItemTemplateString;}var _cf=this._createModuleSummary(_ce,this._modulesListPlaceholder);_cf.startup();this._connectModuleSummaryEvents(_cf);},this);},_connectModuleSummaryEvents:function(_d0){var _d1=this.connect(_d0,"onInstall",function(_d2){this._onModuleAction(_d2);var _d3=_b6.replace(this.res.installsuccess,_d2.module);this.onSuccess([_d3]);this._ensureReload();});var _d4=this.connect(_d0,"onUninstall",function(_d5){this._onModuleAction(_d5);var _d6=_b6.replace(this.res.uninstallsuccess,_d5.module);this.onSuccess([_d6]);this._ensureReload();});var _d7=this.connect(_d0,"onUpdate",function(_d8){this._onModuleAction(_d8);var _d9=_b6.replace(this.res.updatesuccess,_d8.module);this.onSuccess([_d9]);this._ensureReload(_d8);});var _da=this.connect(_d0,"onEnable",function(_db){this._onModuleAction(_db);var _dc=_b6.replace(this.res.enablesuccess,_db.module);this.onSuccess([_dc]);this._ensureReload(_db);});var _dd=this.connect(_d0,"onDisable",function(_de){this._onModuleAction(_de);var _df=_b6.replace(this.res.disablesuccess,_de.module);this.onSuccess([_df]);this._ensureReload(_de);});var _e0=this.connect(_d0,"onInstallError",function(_e1){this.onModuleActionPerformed();var _e2=this._getErrorMessages(this.res.installationerror,_e1.module);this._showErrors(_e2);});var _e3=this.connect(_d0,"onUninstallError",function(_e4){this.onModuleActionPerformed();var _e5=this._getErrorMessages(this.res.uninstallationerror,_e4.module);this._showErrors(_e5);});var _e6=this.connect(_d0,"onUpdateError",function(_e7){this.onModuleActionPerformed();var _e8=this._getErrorMessages(this.res.updateerror,_e7.module);this._showErrors(_e8);});var _e9=this.connect(_d0,"onEnableError",function(_ea){this.onModuleActionPerformed();var _eb=this._getErrorMessages(this.res.enableerror,_ea.module);this._showErrors([_eb]);});var _ec=this.connect(_d0,"onDisableError",function(_ed){this.onModuleActionPerformed();var _ee=this._getErrorMessages(this.res.disableerror,_ed.module);this._showErrors([_ee]);});var _ef={widget:_d0,handlers:[_d1,_d4,_d7,_da,_dd,_e0,_e3,_e6,_e9,_ec]};this._listItems.push(_ef);},_getErrorMessages:function(_f0,_f1){var _f2=[_b6.replace(_f0,_f1)];if(_f1.errors&&_f1.errors.length){_f2=_f2.concat(_f1.errors);}return _f2;},_ensureReload:function(){_b6.publish("onReloadRequired");},_onModuleAction:function(_f3){if(this.hideModuleInListOnAction){this._removeModuleFromList(_f3);}this.onSiteRestartRequired();this.updateView();this.onModuleActionPerformed();},_removeModuleFromList:function(_f4){var _f5=_b6.filter(this._listItems,function(_f6){return _f6.widget==_f4;});_b6.forEach(_f5,function(_f7,i){var _f8=_f7.widget.domNode.parentNode;this._destroyListItem(_f7);var _f9=_b6.indexOf(this._listItems,_f7);if(_f9>-1){this._listItems.splice(_f9,1);}_b6.destroy(_f8);},this);if(this._listItems.length==0){this._showEmptyListMessage();}},_destroyModuleList:function(){_b6.forEach(this._listItems,function(_fa,i){this._destroyListItem(_fa);},this);this._listItems=[];},_destroyListItem:function(_fb){_b6.forEach(_fb.handlers,function(_fc){this.disconnect(_fc);},this);_fb.widget.destroyRecursive(false);},_showErrors:function(_fd){this.onError(_fd);},_showEmptyListMessage:function(){var li=_b6.create("li",{},this._modulesListPlaceholder);var div=_b6.create("div",{innerHTML:"<span>"+this.emptyListMessage+"</span>"},li);_b6.addClass(div,"emptyListMessageContainer");}});});},"epi-packaging/ModuleSummary":function(){require({cache:{"url:epi-packaging/templates/ModuleSummary.htm":"<div data-dojo-attach-event=\"ondijitclick:_moreInfoClick\" data-dojo-attach-point=\"moduleItemContainer\">\r\n    <div class=\"epi-browserWindow\"><div class=\"epi-browserWindowContent\" data-dojo-attach-point=\"moduleIcon\">${emptyIconTemplate}</div></div>\r\n    <h3 data-dojo-attach-point=\"nameNode\">${module.titleWithVersion}</h3>\r\n    <p data-dojo-attach-point=\"updateIndicatorContainer\"><span class=\"epi-newContentNotification\">${res.newerversionavailablemessage}</span><span data-dojo-attach-point=\"updateIndicatorVersion\"></span></p>\r\n    <p data-dojo-attach-point=\"disabledIndicatorContainer\"><span class=\"epi-packaging-indicator epi-packaging-indicator--disabled\">${res.disabledmessage}</span></p>\r\n    <p data-dojo-attach-point=\"descriptionNode\">${module.description}</p><p><a href=\"#details\" data-dojo-attach-event=\"ondijitclick:_moreInfoClick\">${res.moreinformation}</a></p>\r\n\r\n    <p data-dojo-attach-point=\"dependenciesList\"><strong class=\"label\">${res.dependencies} </strong></p>\r\n    <p data-dojo-attach-point=\"tagList\"><strong class=\"label\">${res.tags} </strong></p>\r\n    <p data-dojo-attach-point=\"installInfoBlock\"></p>\r\n    <div data-dojo-attach-point=\"errorList\" data-dojo-type=\"epi-packaging/StatusMessageList\" class=\"epi-advancedListingError\"></div>\r\n    <input type=\"button\" data-dojo-type=\"dijit/form/Button\" label=\"${res.buttoninstalllabel}\" title=\"${res.buttoninstalllabel} ${module.titleWithVersion}\" class=\"moduleActionButton\" data-dojo-attach-event=\"onClick:_installClick\" data-dojo-attach-point=\"InstallButton\" />\r\n    <input type=\"button\" data-dojo-type=\"dijit/form/Button\" label=\"${res.buttonupdatelabel}\" title=\"${res.buttonupdatelabel} ${module.titleWithVersion}\" class=\"moduleActionButton\" data-dojo-attach-event=\"onClick:_updateClick\" data-dojo-attach-point=\"UpdateButton\" />\r\n    <input type=\"button\" data-dojo-type=\"dijit/form/Button\" label=\"${res.buttonenablelabel}\" title=\"${res.buttonenablelabel} ${module.titleWithVersion}\" class=\"moduleActionButton\" data-dojo-attach-event=\"onClick:_enableClick\" data-dojo-attach-point=\"EnableButton\" />\r\n    <input type=\"button\" data-dojo-type=\"dijit/form/Button\" label=\"${res.buttondisablelabel}\" title=\"${res.buttondisablelabel} ${module.titleWithVersion}\" class=\"moduleActionButton\" data-dojo-attach-event=\"onClick:_disableClick\" data-dojo-attach-point=\"DisableButton\" />\r\n    <input type=\"button\" data-dojo-type=\"dijit/form/Button\" label=\"${res.buttonuninstalllabel}\" title=\"${res.buttonuninstalllabel} ${module.titleWithVersion}\" class=\"moduleActionButton\" data-dojo-attach-event=\"onClick:_uninstallClick\" data-dojo-attach-point=\"UninstallButton\" />\r\n</div>"}});define("epi-packaging/ModuleSummary",["dojo","dojo/_base/event","dojo/dom-class","dojo/string","dijit","dijit/_Widget","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojox/widget/Standby","epi/datetime","epi/routes","epi/shell/XhrWrapper","epi/shell/widget/dialog/Confirmation","epi/shell/widget/dialog/Dialog","epi-packaging/DetailedView","epi-packaging/StatusMessageList","dojo/text!./templates/ModuleSummary.htm","epi/i18n!epi/packaging/nls/EPiServer.Packaging.UI.ModuleSummary"],function(_fe,_ff,_100,_101,_102,_103,_104,_105,_106,_107,_108,_109,_10a,_10b,_10c,_10d,_10e,res){return _fe.declare([_103,_104,_105],{res:res,templateString:_10e,antiForgeryData:null,module:null,iconTemplate:"<img src=\"${0}\" class=\"epi-preview\" />",emptyIconTemplate:"<div class=\"epi-noPreviewIcon\"></div>",_moduleStandby:null,constructor:function(){this.uninstallUrl=_108.getActionPath({moduleArea:"EPiServer.Packaging.UI",controller:"AddOns",action:"UninstallModule"});this.installUrl=_108.getActionPath({moduleArea:"EPiServer.Packaging.UI",controller:"AddOns",action:"InstallModule"});this.updateUrl=_108.getActionPath({moduleArea:"EPiServer.Packaging.UI",controller:"AddOns",action:"UpdateModule"});this.enableUrl=_108.getActionPath({moduleArea:"EPiServer.Packaging.UI",controller:"AddOns",action:"EnableModule"});this.disableUrl=_108.getActionPath({moduleArea:"EPiServer.Packaging.UI",controller:"AddOns",action:"DisableModule"});this._xhr=new _109();},postCreate:function(){this.inherited(arguments);this.connect(this.InstallButton.domNode,"click",function(e){_ff.stop(e);});this.connect(this.UpdateButton.domNode,"click",function(e){_ff.stop(e);});this.connect(this.UninstallButton.domNode,"click",function(e){_ff.stop(e);});this.connect(this.DisableButton.domNode,"click",function(e){_ff.stop(e);});this.connect(this.EnableButton.domNode,"click",function(e){_ff.stop(e);});},startup:function(){this.updateView();this.inherited(arguments);},onInstall:function(_10f){},onInstallError:function(_110){},onUpdate:function(_111){},onUpdateError:function(_112){},onUninstall:function(_113){},onUninstallError:function(_114){},onEnable:function(_115){},onEnableError:function(_116){},onDisable:function(_117){},onDisableError:function(_118){},updateView:function(){this._setButtonVisibility();this._createDependencies();this._createTags();if(this.module.installedBy!=""){var _119=_107.toUserFriendlyHtml(this.module.installDate);var _11a="Installed on "+_119+" by "+this.module.installedBy;this.installInfoBlock.innerHTML=_11a;}else{_fe.destroy(this.installInfoBlock);}this.set("icon",this.module.iconUrl);this._showErrors();},_setIconAttr:function(_11b){if(_11b){this.moduleIcon.innerHTML=_101.substitute(this.iconTemplate,[_11b]);}else{this.moduleIcon.innerHTML=this.emptyIconTemplate;}},_setButtonVisibility:function(){_fe.style(this.InstallButton.domNode,"display","none");_fe.style(this.UninstallButton.domNode,"display","none");_fe.style(this.UpdateButton.domNode,"display","none");_fe.style(this.updateIndicatorContainer,"display","none");_fe.style(this.EnableButton.domNode,"display","none");_fe.style(this.DisableButton.domNode,"display","none");_fe.style(this.disabledIndicatorContainer,"display","none");_fe.removeClass(this.moduleItemContainer,"disabledItem");if(this.module.isInstalled){_fe.style(this.InstallButton.domNode,"display","inline-block");this.InstallButton.set("disabled",true);}if(this.module.actionsAvailable.install&&!this.module.actionsAvailable.installAsUpdate){_fe.style(this.InstallButton.domNode,"display","inline-block");}if(this.module.actionsAvailable.enable){_fe.style(this.EnableButton.domNode,"display","inline-block");}if(this.module.actionsAvailable.installAsUpdate){_fe.style(this.UpdateButton.domNode,"display","inline-block");}if(this.module.isDisabled){_fe.style(this.disabledIndicatorContainer,"display","inline-block");_fe.addClass(this.moduleItemContainer,"disabledItem");}},_createTags:function(){_fe.forEach(this.module.tags,function(tag,i){var _11c=_fe.create("span");_100.add(_11c,"epi-valueItem");this.tagList.appendChild(_11c);_11c.innerHTML=tag;},this);},_createDependencies:function(){_fe.forEach(this.module.dependencies,function(_11d,i){var _11e=_fe.create("span");_100.add(_11e,"epi-valueItem");this.dependenciesList.appendChild(_11e);_11e.innerHTML=_11d.name;},this);},_showErrors:function(){this.errorList.clearMessages();if(this.module.errors&&this.module.errors.length){this.errorList.addMessages(this.module.errors);}},_uninstallClick:function(e){this._showConfirmationDialog(this.res.uninstallconfirmation,_fe.hitch(this,function(_11f){if(_11f){this._uninstallModule();}}));},_installClick:function(e){this._showConfirmationDialog(this.res.installconfirmation,_fe.hitch(this,function(_120){if(_120){this._installModule();}}));},_updateClick:function(e){this._showConfirmationDialog(this.res.updateconfirmation,_fe.hitch(this,function(_121){if(_121){this._updateModule();}}));},_moreInfoClick:function(e){_ff.stop(e);var _122=this;var _123=new _10b({content:new _10c({currentPackage:this.module,installHandler:_fe.hitch(_123,function(){_122._showConfirmationDialog(_122.res.installconfirmation,_fe.hitch(_123,function(_124){if(_124){this.hide();_122._installModule();}}));}),updateHandler:_fe.hitch(_123,function(){_122._showConfirmationDialog(_122.res.updateconfirmation,_fe.hitch(_123,function(_125){if(_125){this.hide();_122._updateModule();}}));}),unInstallHandler:_fe.hitch(_123,function(){_122._showConfirmationDialog(_122.res.uninstallconfirmation,_fe.hitch(_123,function(_126){if(_126){this.hide();_122._uninstallModule();}}));}),enableHandler:_fe.hitch(_123,function(){_122._showConfirmationDialog(_122.res.enableconfirmation,_fe.hitch(_123,function(_127){if(_127){this.hide();_122._enableModule();}}));}),disableHandler:_fe.hitch(_123,function(){_122._showConfirmationDialog(_122.res.disableconfirmation,_fe.hitch(_123,function(_128){if(_128){this.hide();_122._disableModule();}}));}),closeHandler:_fe.hitch(_123,function(){_123.hide();})}),title:this.module.title,destroyOnHide:true,defaultActionsVisible:false});_123.show();},_enableClick:function(e){this._showConfirmationDialog(this.res.enableconfirmation,_fe.hitch(this,function(_129){if(_129){this._enableModule();}}));},_disableClick:function(e){this._showConfirmationDialog(this.res.disableconfirmation,_fe.hitch(this,function(_12a){if(_12a){this._disableModule();}}));},_installModule:function(){this._showStandby();var _12b={id:this.module.id,version:this.module.version};this.antiForgeryData.AddAntiforgeryToken(_12b);this._xhr.xhrPost({content:_12b,url:this.installUrl,handleAs:"json",load:_fe.hitch(this,function(_12c){this.module=_12c;this._setButtonVisibility();this._moduleStandby.hide();if(this.module.errors&&this.module.errors.length){this._showErrors();this.onInstallError(this);}else{this.onInstall(this);}}),error:_fe.hitch(this,function(err,_12d){this._moduleStandby.hide();_fe.publish("onServerError",[_12d]);})});},_updateModule:function(){this._showStandby();var _12e={id:this.module.id,version:this.module.versionLatestAvailable};this.antiForgeryData.AddAntiforgeryToken(_12e);this._xhr.xhrPost({content:_12e,url:this.updateUrl,handleAs:"json",load:_fe.hitch(this,function(_12f){this.module=_12f;this._setButtonVisibility();this._moduleStandby.hide();if(this.module.errors&&this.module.errors.length){this._showErrors();this.onUpdateError(this);}else{this.onUpdate(this);}}),error:_fe.hitch(this,function(err,_130){this._moduleStandby.hide();_fe.publish("onServerError",[_130]);})});},_uninstallModule:function(){this._showStandby();var _131={id:this.module.id,version:this.module.version};this.antiForgeryData.AddAntiforgeryToken(_131);this._xhr.xhrPost({content:_131,url:this.uninstallUrl,handleAs:"json",load:_fe.hitch(this,function(_132){this.module=_132;this._setButtonVisibility();this._moduleStandby.hide();if(this.module.errors&&this.module.errors.length){this._showErrors();this.onUninstallError(this);}else{this.onUninstall(this);}}),error:_fe.hitch(this,function(err,_133){this._moduleStandby.hide();_fe.publish("onServerError",[_133]);})});},_enableModule:function(){this._showStandby();var _134={id:this.module.id,version:this.module.version};this.antiForgeryData.AddAntiforgeryToken(_134);this._xhr.xhrPost({content:_134,url:this.enableUrl,handleAs:"json",load:_fe.hitch(this,function(_135){this.module=_135;this._setButtonVisibility();this._moduleStandby.hide();if(this.module.errors&&this.module.errors.length){this._showErrors();this.onEnableError(this);}else{this.onEnable(this);}}),error:_fe.hitch(this,function(err,_136){this._moduleStandby.hide();_fe.publish("onServerError",[_136]);})});},_disableModule:function(){this._showStandby();var _137={id:this.module.id,version:this.module.version};this.antiForgeryData.AddAntiforgeryToken(_137);this._xhr.xhrPost({content:_137,url:this.disableUrl,handleAs:"json",load:_fe.hitch(this,function(_138){this.module=_138;this._setButtonVisibility();this._moduleStandby.hide();if(this.module.errors&&this.module.errors.length){this._showErrors();this.onDisableError(this);}else{this.onDisable(this);}}),error:_fe.hitch(this,function(err,_139){this._moduleStandby.hide();_fe.publish("onServerError",[_139]);})});},_showStandby:function(){if(!this._moduleStandby){this._moduleStandby=new _106({target:this.domNode});document.body.appendChild(this._moduleStandby.domNode);this._moduleStandby.startup();}this._moduleStandby.show();},_showConfirmationDialog:function(_13a,_13b){var _13c=new _10a({description:_fe.replace(_13a,{name:this.module.title,version:this.module.version}),title:this.res.confirmationdialogtitle,onAction:_13b});_13c.show();}});});},"url:epi-packaging/templates/ModuleSummary.htm":"<div data-dojo-attach-event=\"ondijitclick:_moreInfoClick\" data-dojo-attach-point=\"moduleItemContainer\">\r\n    <div class=\"epi-browserWindow\"><div class=\"epi-browserWindowContent\" data-dojo-attach-point=\"moduleIcon\">${emptyIconTemplate}</div></div>\r\n    <h3 data-dojo-attach-point=\"nameNode\">${module.titleWithVersion}</h3>\r\n    <p data-dojo-attach-point=\"updateIndicatorContainer\"><span class=\"epi-newContentNotification\">${res.newerversionavailablemessage}</span><span data-dojo-attach-point=\"updateIndicatorVersion\"></span></p>\r\n    <p data-dojo-attach-point=\"disabledIndicatorContainer\"><span class=\"epi-packaging-indicator epi-packaging-indicator--disabled\">${res.disabledmessage}</span></p>\r\n    <p data-dojo-attach-point=\"descriptionNode\">${module.description}</p><p><a href=\"#details\" data-dojo-attach-event=\"ondijitclick:_moreInfoClick\">${res.moreinformation}</a></p>\r\n\r\n    <p data-dojo-attach-point=\"dependenciesList\"><strong class=\"label\">${res.dependencies} </strong></p>\r\n    <p data-dojo-attach-point=\"tagList\"><strong class=\"label\">${res.tags} </strong></p>\r\n    <p data-dojo-attach-point=\"installInfoBlock\"></p>\r\n    <div data-dojo-attach-point=\"errorList\" data-dojo-type=\"epi-packaging/StatusMessageList\" class=\"epi-advancedListingError\"></div>\r\n    <input type=\"button\" data-dojo-type=\"dijit/form/Button\" label=\"${res.buttoninstalllabel}\" title=\"${res.buttoninstalllabel} ${module.titleWithVersion}\" class=\"moduleActionButton\" data-dojo-attach-event=\"onClick:_installClick\" data-dojo-attach-point=\"InstallButton\" />\r\n    <input type=\"button\" data-dojo-type=\"dijit/form/Button\" label=\"${res.buttonupdatelabel}\" title=\"${res.buttonupdatelabel} ${module.titleWithVersion}\" class=\"moduleActionButton\" data-dojo-attach-event=\"onClick:_updateClick\" data-dojo-attach-point=\"UpdateButton\" />\r\n    <input type=\"button\" data-dojo-type=\"dijit/form/Button\" label=\"${res.buttonenablelabel}\" title=\"${res.buttonenablelabel} ${module.titleWithVersion}\" class=\"moduleActionButton\" data-dojo-attach-event=\"onClick:_enableClick\" data-dojo-attach-point=\"EnableButton\" />\r\n    <input type=\"button\" data-dojo-type=\"dijit/form/Button\" label=\"${res.buttondisablelabel}\" title=\"${res.buttondisablelabel} ${module.titleWithVersion}\" class=\"moduleActionButton\" data-dojo-attach-event=\"onClick:_disableClick\" data-dojo-attach-point=\"DisableButton\" />\r\n    <input type=\"button\" data-dojo-type=\"dijit/form/Button\" label=\"${res.buttonuninstalllabel}\" title=\"${res.buttonuninstalllabel} ${module.titleWithVersion}\" class=\"moduleActionButton\" data-dojo-attach-event=\"onClick:_uninstallClick\" data-dojo-attach-point=\"UninstallButton\" />\r\n</div>","url:epi-packaging/templates/Section.htm":"<div style=\"overflow:auto;\">\r\n    <div data-dojo-attach-point=\"_headerPlaceholder\"></div>\r\n    <div class=\"epi-newContentContainerInverted\">\r\n        <div data-dojo-attach-point=\"_contentPlaceholder\"></div>\r\n    </div>\r\n</div>","epi-packaging/InstalledSection":function(){require({cache:{"url:epi-packaging/templates/Section.htm":"<div style=\"overflow:auto;\">\r\n    <div data-dojo-attach-point=\"_headerPlaceholder\"></div>\r\n    <div class=\"epi-newContentContainerInverted\">\r\n        <div data-dojo-attach-point=\"_contentPlaceholder\"></div>\r\n    </div>\r\n</div>"}});define("epi-packaging/InstalledSection",["dojo/_base/declare","dojo/dom-geometry","dojo/text!./templates/Section.htm","dijit/_TemplatedMixin","dijit/layout/_LayoutWidget","epi/routes","epi-packaging/SectionHeader","epi-packaging/PackagesGrid","epi/i18n!epi/packaging/nls/EPiServer.Packaging.UI.InstalledSection"],function(_13d,_13e,_13f,_140,_141,_142,_143,_144,_145){return _13d([_141,_140],{templateString:_13f,antiForgeryData:null,_headerWidget:null,_listWidget:null,startup:function(){if(this._started){return;}var _146=new _143({webHelpAlias:"installedaddons",antiForgeryData:this.antiForgeryData,sectionTitle:_145.title},this._headerPlaceholder);var list=new _144({antiForgeryData:this.antiForgeryData,listingUrl:_142.getActionPath({moduleArea:"EPiServer.Packaging.UI",controller:"AddOns",action:"GetInstalledModules"})},this._contentPlaceholder);_146.startup();list.startup();this.connect(list,"onSiteRestartRequired",function(){_146.updateView();});this.connect(list,"onError",function(_147){_146.addErrorMessages(_147);});this.connect(list,"onSuccess",function(_148){_146.addSuccessMessages(_148);});this.connect(list,"onModuleActionPerformed",function(){_146.clearErrorMessages();_146.clearSuccessMessages();});this.inherited(arguments);this._headerWidget=_146;this._listWidget=list;},layout:function(){var _149=this.getChildren();if(_149&&_149.length==2){this._layout2Children(_149[0],_149[1]);}},_layout2Children:function(_14a,_14b){var _14c=_13e.position(this.domNode).h,_14d=_13e.position(_14a.domNode).h,_14e=_14c-_14d;_14b.resize({h:_14e});},updateView:function(){this._headerWidget.clearErrorMessages();this._headerWidget.clearSuccessMessages();this._headerWidget.updateView();this._listWidget.updateView();}});});},"epi-packaging/PackagesGrid":function(){define("epi-packaging/PackagesGrid",["dojo/_base/array","dojo/_base/declare","dojo/_base/event","dojo/_base/lang","dojo/dom-construct","dojo/dom-style","dojo/on","dojox/widget/Standby","dijit/layout/_LayoutWidget","dgrid/Keyboard","dgrid/OnDemandGrid","dgrid/Selection","epi","epi/datetime","epi/shell/widget/dialog/Confirmation","epi/shell/widget/dialog/Dialog","epi-packaging/ModulesList","epi-packaging/DetailedView","epi-packaging/ModuleSummary","epi/i18n!epi/packaging/nls/EPiServer.Packaging.UI.PackagesGrid","epi/i18n!epi/packaging/nls/EPiServer.Packaging.UI.ModuleSummary"],function(_14f,_150,_151,lang,_152,_153,on,_154,_155,_156,_157,_158,epi,_159,_15a,_15b,_15c,_15d,_15e,_15f,_160){return _150([_155,_15c],{templateString:"<div></div>",_createStandbyWidget:function(){return new _154({target:this.domNode});},buildRendering:function(){this.inherited(arguments);var _161={titleWithVersion:{className:"epi-packaging-name",label:epi.resources.header.name,renderCell:lang.hitch(this,function(item,_162,node){if(_162){var link=_152.create("a",{"class":"epi-packaging-namelink",href:"#details",innerHTML:_162});on(link,"click",lang.hitch(this,function(evt){_151.stop(evt);this._openDetails(item);}));_152.place(link,node);}})},description:{className:"epi-packaging-description",label:epi.resources.header.description},tags:{className:"epi-packaging-tags",label:_15f.tags,renderCell:function(item,_163,node){_14f.forEach(_163,function(tag){_152.create("span",{"class":"epi-valueItem",innerHTML:tag},node);});}},installDate:{className:"epi-packaging-installedDate",label:_15f.installdate,formatter:function(_164){return _159.toUserFriendlyString(_164);}},installedBy:{className:"epi-packaging-installedBy",label:_15f.installby},_item:{className:"epi-packaging-indicators",label:" ",sortable:false,renderCell:function(item,_165,node){if(item.isDisabled){_152.create("span",{"class":"epi-packaging-indicator epi-packaging-indicator--disabled",innerHTML:_15f.disabledlabel},node);}if(item.isSystem){_152.create("span",{"class":"epi-packaging-indicator epi-packaging-indicator--core",innerHTML:_15f.systemlabel},node);}if(item.isUpdateAvailable){_152.create("a",{"class":"epi-visibleLink",href:"#updates",innerHTML:_15f.updatelink},node);}}}};this.grid=new (_150([_157,_158,_156]))({columns:_161,selectionMode:"single",sort:[{attribute:"titleWithVersion",descending:false}],store:this._dataStore},this.domNode);},_buildModuleList:function(){this._renderModules(this._dataStore);},_renderModules:function(_166){this._destroyModuleList();this.grid.cleanup();this._listItems=[];_14f.forEach(_166.data,function(item){var _167={module:item,antiForgeryData:this.antiForgeryData,_moduleStandby:this._standbyWigdet,_setButtonVisibility:function(){}};item.moduleSummary=new _15e(_167,null);this._connectModuleSummaryEvents(item.moduleSummary);},this);this.grid.set("store",_166);},_openDetails:function(_168){var _169=this;var _16a=new _15b({content:new _15d({currentPackage:_168,installHandler:lang.hitch(_16a,function(){_169._showConfirmationDialog(_168,_160.installconfirmation,lang.hitch(_16a,function(_16b){if(_16b){this.hide();_168.moduleSummary._installModule();}}));}),updateHandler:lang.hitch(_16a,function(){_169._showConfirmationDialog(_168,_160.updateconfirmation,lang.hitch(_16a,function(_16c){if(_16c){this.hide();_168.moduleSummary._updateModule();}}));}),unInstallHandler:lang.hitch(_16a,function(){_169._showConfirmationDialog(_168,_160.uninstallconfirmation,lang.hitch(_16a,function(_16d){if(_16d){this.hide();_168.moduleSummary._uninstallModule();}}));}),disableHandler:lang.hitch(_16a,function(){_169._showConfirmationDialog(_168,_160.disableconfirmation,lang.hitch(_16a,function(_16e){if(_16e){this.hide();_168.moduleSummary._disableModule();}}));}),enableHandler:lang.hitch(_16a,function(){_169._showConfirmationDialog(_168,_160.enableconfirmation,lang.hitch(_16a,function(_16f){if(_16f){this.hide();_168.moduleSummary._enableModule();}}));}),closeHandler:lang.hitch(_16a,function(){_16a.hide();})}),title:_168.title,destroyOnHide:true,defaultActionsVisible:false});_16a.show();},_showConfirmationDialog:function(_170,_171,_172){var _173=new _15a({description:lang.replace(_171,{name:_170.title,version:_170.version}),title:_160.confirmationdialogtitle,onAction:_172});_173.show();}});});},"epi-packaging/LinkButton":function(){define("epi-packaging/LinkButton",["epi","dojo","dijit","dijit/_Widget"],function(epi,dojo,_174,_175){return dojo.declare([_175],{label:"",href:"",buildRendering:function(){this.domNode=dojo.create("a",{href:this.href,"class":this["class"],innerHTML:this.label});},postCreate:function(){this.connect(this.domNode,"onclick",this._onClick);},onClick:function(e){return true;},_onClick:function(e){this.onClick(e);}});});},"epi-packaging/NavigationMenu":function(){require({cache:{"url:epi-packaging/templates/NavigationMenu.htm":"<div class=\"epi-verticalMenu\">\r\n    <div data-dojo-type=\"dijit/DropDownMenu\" data-dojo-attach-point=\"verticalMenu\" class=\"epi-dropDownNavigation epi-wrapped\">\r\n        <div data-dojo-type=\"dijit/MenuItem\" id=\"installed\">${res.installeditemlabel}</div>\r\n        <!-- dynamic list of feeds goes here -->\r\n        <div data-dojo-type=\"dijit/MenuItem\" id=\"updates\">${res.updatesitemlabel}</div>\r\n    </div>\r\n</div>"}});define("epi-packaging/NavigationMenu",["dojo","dojo/hash","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dijit/DropDownMenu","dijit/MenuItem","epi/routes","epi/shell/XhrWrapper","dojo/text!./templates/NavigationMenu.htm","epi/i18n!epi/packaging/nls/EPiServer.Packaging.UI.Navigation","epi/i18n!epi/packaging/nls/EPiServer.Packaging.UI.Feeds"],function(dojo,hash,_176,_177,_178,_179,_17a,_17b,_17c,_17d,res,_17e){return dojo.declare([_176,_177,_178],{templateString:_17d,antiForgeryData:"",res:res,resFeeds:_17e,_viewDictionary:{"installed":"epi-packaging/InstalledSection","updates":"epi-packaging/UpdateableSection"},constructor:function(){this._xhr=new _17c();},startup:function(){this.inherited(arguments);var _17f={};this.antiForgeryData.AddAntiforgeryToken(_17f);this._xhr.xhrPost({content:_17f,url:_17b.getActionPath({moduleArea:"EPiServer.Packaging.UI",controller:"AddOns",action:"GetFeedNames"}),handleAs:"json",load:dojo.hitch(this,function(_180,_181){for(var i=0;i<_180.feeds.length;i++){var _182=this.resFeeds[_180.feeds[i].toLowerCase()];this.verticalMenu.addChild(new _17a({id:_180.feeds[i],label:_182?_182.title:_180.feeds[i]}),1+i);this._viewDictionary[_180.feeds[i]]="epi-packaging/GallerySection";}var _183=dijit.byId("installed");if(dojo.hash()!=""){var page=dijit.byId(dojo.hash());if(page){_183=page;}}this.verticalMenu.onItemClick(_183);})});dojo.connect(this.verticalMenu,"onItemClick",this,function(item){this._requestChangeView(item.id);});this.subscribe("/epi/shell/action/viewchanged",dojo.hitch(this,function(type,args,data){if(data){for(var id in this._viewDictionary){if(id==data.feedName){this._selectItemById(id);return;}}}this._selectItemById(null);}));dojo.subscribe("/dojo/hashchange",this,function(_184){if(_184!=""){var item=dijit.byId(_184);if(item&&!item.selected){this.verticalMenu.onItemClick(item);}}});},_requestChangeView:function(id){var _185=id?this._viewDictionary[id]:null;if(_185){dojo.publish("/epi/shell/action/changeview",[_185,null,{"feedName":id}]);}},_selectItemById:function(id){dojo.forEach(this.verticalMenu.getChildren(),function(_186){_186.set("selected",false);});if(id){var item=dijit.byId(id);if(item){item.set("selected",true);dojo.hash(item.id);}}}});});},"url:epi-packaging/templates/NavigationMenu.htm":"<div class=\"epi-verticalMenu\">\r\n    <div data-dojo-type=\"dijit/DropDownMenu\" data-dojo-attach-point=\"verticalMenu\" class=\"epi-dropDownNavigation epi-wrapped\">\r\n        <div data-dojo-type=\"dijit/MenuItem\" id=\"installed\">${res.installeditemlabel}</div>\r\n        <!-- dynamic list of feeds goes here -->\r\n        <div data-dojo-type=\"dijit/MenuItem\" id=\"updates\">${res.updatesitemlabel}</div>\r\n    </div>\r\n</div>","epi-packaging/PackageUpload":function(){require({cache:{"url:epi-packaging/templates/PackageUpload.htm":"<div>\r\n    <!-- Upload form -->\r\n    <form method=\"post\" action=\"${_uploadUrl}\" enctype=\"multipart/form-data\">\r\n        <div class=\"uploaderButton\" >\r\n            <input dojoAttachPoint=\"_uploaderInput\" type=\"file\" />\r\n        </div>\r\n        <input type=\"submit\" dojoAttachPoint=\"_installButton\" label=\"${res.buttoninstall}\" data-dojo-type=\"dijit/form/Button\" />\r\n        <input type=\"reset\" dojoAttachPoint=\"_clearButton\" label=\"${res.buttonclear}\" data-dojo-type=\"dijit/form/Button\" />\r\n        <div class=\"epi-paddingVertical-small\">\r\n            <!-- Selected files -->\r\n            <div dojoAttachPoint=\"_fileListNode\"></div>\r\n            <!-- Uploaded file -->\r\n            <div dojoAttachPoint=\"_uploadResultsNode\"></div>\r\n        </div>\r\n        <input type=\"hidden\" dojoAttachPoint=\"_uploadType\" name=\"uploadType\" />\r\n    </form>\r\n</div>\r\n"}});define("epi-packaging/PackageUpload",["dojo","dijit","dijit/_Widget","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dijit/layout/TabContainer","dijit/layout/ContentPane","epi/routes","epi-packaging/UploadResults","epi-packaging/SelectedFiles","epi-packaging/RestartSite","dojox/widget/Standby","epi/shell/widget/HelpButton","dojox/form/Uploader","dojox/form/uploader/plugins/IFrame","dojo/text!./templates/PackageUpload.htm","epi/i18n!epi/packaging/nls/EPiServer.Packaging.UI.PackageUpload"],function(dojo,_187,_188,_189,_18a,_18b,_18c,_18d,_18e,_18f,_190,_191,_192,_193,_194,_195,res){return dojo.declare([_188,_189,_18a],{res:res,successMessageClass:"successInstall",failureMessageClass:"failureInstall",templateString:_195,antiForgeryData:null,_uploadUrl:null,_uploader:null,_uploadResultsNode:null,_installButton:null,_clearButton:null,_fileListNode:null,_fileList:null,_uploadResults:null,_standByWidget:null,_uploaderResetRequired:false,postMixInProperties:function(){this._uploadUrl=_18d.getActionPath({moduleArea:"EPiServer.Packaging.UI",controller:"AddOns",action:"Upload"});this.inherited(arguments);},startup:function(){if(this._started){return;}this._uploader=new dojox.form.Uploader({label:this.res.buttonselectpackage,multiple:true},this._uploaderInput);dojo.style(this._uploader.domNode,{width:"200px"});this._uploader.inputNodeFontSize=4;this._uploader.btnSize={w:200,h:25};this._uploaderResetRequired=true;this._uploader.startup();this._uploadType.value=this._uploader.uploadType;if(this.antiForgeryData){dojo.place(this.antiForgeryData.GetTokenNode(),this._clearButton.domNode,"after");}this._fileList=new _18f({uploader:this._uploader},this._fileListNode);this._fileList.startup();this._standByWidget=new _191({target:this._fileList.listTable});document.body.appendChild(this._standByWidget.domNode);this._standByWidget.startup();dojo.connect(this._uploader,"onError",this,this._onUploaderError);dojo.connect(this._uploader,"onComplete",this,this._onUploadComplete);dojo.connect(this._uploader,"onChange",this,this._onUploadChange);dojo.connect(this._clearButton,"onClick",this,this._onClear);dojo.connect(this._installButton,"onClick",this,this._onInstall);this._disableButtons(true);this.inherited(arguments);},updateView:function(){if(this._uploaderResetRequired){this._onClear();this._uploaderResetRequired=false;}if(this._uploadResults){this._uploadResults.destroyRecursive(false);}},onSiteRestartRequired:function(){},onError:function(_196){},onSuccess:function(_197){},onModuleActionPerformed:function(){},_onClear:function(){this._uploader.reset();this._disableButtons(true);this.onModuleActionPerformed();},_onInstall:function(){this._standByWidget.show();this.onModuleActionPerformed();},_onUploaderError:function(evt){this._standByWidget.hide();this.onError([this.res.uploaderrormessage]);var _198=evt.headers;if(_198&&_198.indexOf("X-EPiLogOnScreen")!=-1){window.location.reload();}},_onUploadComplete:function(data){this._standByWidget.hide();this._disableButtons(true);this._showUploadResults(data);this.onSiteRestartRequired();},_onUploadChange:function(_199){this._standByWidget.hide();if(_199.length>0){this._disableButtons(false);}if(this._uploadResults){this._uploadResults.destroyRecursive(false);}},_disableButtons:function(_19a){this._clearButton.set("disabled",_19a);this._installButton.set("disabled",_19a);},_showUploadResults:function(_19b){if(this._uploadResults){this._uploadResults.destroyRecursive(false);}if(_19b.uploadedFiles&&_19b.uploadedFiles.length>0){var _19c=dojo.map(_19b.uploadedFiles,function(file,i){file.index=i+1;file.sizeStr=this._uploader.convertBytes(file.packageFileLength).value;return file;},this);var _19d=_19b.installationFailCount==0;if(!_19d){var _19e=dojo.replace(this.res.failuremessage,{count:_19b.installationFailCount});this.onError([_19e]);}else{var _19f=dojo.replace(this.res.successmessage,{count:_19b.installationSuccessCount});this.onSuccess([_19f]);}this._uploadResults=new _18e({files:_19c});this._uploadResultsNode.appendChild(this._uploadResults.domNode);this._uploadResults.startup();dojo.forEach(_19b.uploadedFiles,function(file,i){if(file.packageInfo&&file.packageInfo.id=="EPiServer.Packaging"){dojo.publish("onReloadRequired");}});}}});});},"epi-packaging/UploadResults":function(){define(["dojo","dijit","dijit/_Widget","dojox/dtl/_Templated","dojo/text!./templates/UploadResults.htm","epi/i18n!epi/packaging/nls/EPiServer.Packaging.UI.UploadResults","dojox/dtl/tag/logic"],function(dojo,_1a0,_1a1,_1a2,_1a3,res){return dojo.declare([_1a1,_1a2],{res:res,files:[],templateString:_1a3,_dijitTemplateCompat:true});});},"dojox/dtl/_Templated":function(){define("dojox/dtl/_Templated",["dojo/_base/declare","./_base","dijit/_TemplatedMixin","dojo/dom-construct","dojo/cache","dojo/_base/array","dojo/string","dojo/parser"],function(_1a4,dd,_1a5,_1a6,_1a7,_1a8,_1a9,_1aa){return _1a4("dojox.dtl._Templated",_1a5,{_dijitTemplateCompat:false,buildRendering:function(){var node;if(this.domNode&&!this._template){return;}if(!this._template){var t=this.getCachedTemplate(this.templatePath,this.templateString,this._skipNodeCache);if(t instanceof dd.Template){this._template=t;}else{node=t.cloneNode(true);}}if(!node){var _1ab=new dd._Context(this);if(!this._created){delete _1ab._getter;}var _1ac=_1a6.toDom(this._template.render(_1ab));if(_1ac.nodeType!==1&&_1ac.nodeType!==3){for(var i=0,l=_1ac.childNodes.length;i<l;++i){node=_1ac.childNodes[i];if(node.nodeType==1){break;}}}else{node=_1ac;}}this._attachTemplateNodes(node,function(n,p){return n.getAttribute(p);});if(this.widgetsInTemplate){var _1ad=_1aa,qry,attr;if(_1ad._query!="[dojoType]"){qry=_1ad._query;attr=_1ad._attrName;_1ad._query="[dojoType]";_1ad._attrName="dojoType";}var cw=(this._startupWidgets=_1aa.parse(node,{noStart:!this._earlyTemplatedStartup,inherited:{dir:this.dir,lang:this.lang}}));if(qry){_1ad._query=qry;_1ad._attrName=attr;}this._attachTemplateNodes(cw,function(n,p){return n[p];});}if(this.domNode){_1a6.place(node,this.domNode,"before");this.destroyDescendants();_1a6.destroy(this.domNode);}this.domNode=node;this._fillContent(this.srcNodeRef);},_templateCache:{},getCachedTemplate:function(_1ae,_1af,_1b0){var _1b1=this._templateCache;var key=_1af||_1ae;if(_1b1[key]){return _1b1[key];}_1af=_1a9.trim(_1af||_1a7(_1ae,{sanitize:true}));if(this._dijitTemplateCompat&&(_1b0||_1af.match(/\$\{([^\}]+)\}/g))){_1af=this._stringRepl(_1af);}if(_1b0||!_1af.match(/\{[{%]([^\}]+)[%}]\}/g)){return _1b1[key]=_1a6.toDom(_1af);}else{return _1b1[key]=new dd.Template(_1af);}},render:function(){this.buildRendering();},startup:function(){_1a8.forEach(this._startupWidgets,function(w){if(w&&!w._started&&w.startup){w.startup();}});this.inherited(arguments);}});});},"dojox/dtl/_base":function(){define("dojox/dtl/_base",["dojo/_base/kernel","dojo/_base/lang","dojox/string/tokenize","dojo/_base/json","dojo/dom","dojo/_base/xhr","dojox/string/Builder","dojo/_base/Deferred"],function(_1b2,lang,_1b3,json,dom,xhr,_1b4,_1b5){_1b2.experimental("dojox.dtl");var dd=lang.getObject("dojox.dtl",true);dd._base={};dd.TOKEN_BLOCK=-1;dd.TOKEN_VAR=-2;dd.TOKEN_COMMENT=-3;dd.TOKEN_TEXT=3;dd._Context=lang.extend(function(dict){if(dict){lang._mixin(this,dict);if(dict.get){this._getter=dict.get;delete this.get;}}},{push:function(){var last=this;var _1b6=lang.delegate(this);_1b6.pop=function(){return last;};return _1b6;},pop:function(){throw new Error("pop() called on empty Context");},get:function(key,_1b7){var n=this._normalize;if(this._getter){var got=this._getter(key);if(got!==undefined){return n(got);}}if(this[key]!==undefined){return n(this[key]);}return _1b7;},_normalize:function(_1b8){if(_1b8 instanceof Date){_1b8.year=_1b8.getFullYear();_1b8.month=_1b8.getMonth()+1;_1b8.day=_1b8.getDate();_1b8.date=_1b8.year+"-"+("0"+_1b8.month).slice(-2)+"-"+("0"+_1b8.day).slice(-2);_1b8.hour=_1b8.getHours();_1b8.minute=_1b8.getMinutes();_1b8.second=_1b8.getSeconds();_1b8.microsecond=_1b8.getMilliseconds();}return _1b8;},update:function(dict){var _1b9=this.push();if(dict){lang._mixin(this,dict);}return _1b9;}});var _1ba=/("(?:[^"\\]*(?:\\.[^"\\]*)*)"|'(?:[^'\\]*(?:\\.[^'\\]*)*)'|[^\s]+)/g;var _1bb=/\s+/g;var _1bc=function(_1bd,_1be){_1bd=_1bd||_1bb;if(!(_1bd instanceof RegExp)){_1bd=new RegExp(_1bd,"g");}if(!_1bd.global){throw new Error("You must use a globally flagged RegExp with split "+_1bd);}_1bd.exec("");var part,_1bf=[],_1c0=0,i=0;while((part=_1bd.exec(this))){_1bf.push(this.slice(_1c0,_1bd.lastIndex-part[0].length));_1c0=_1bd.lastIndex;if(_1be&&(++i>_1be-1)){break;}}_1bf.push(this.slice(_1c0));return _1bf;};dd.Token=function(_1c1,_1c2){this.token_type=_1c1;this.contents=new String(lang.trim(_1c2));this.contents.split=_1bc;this.split=function(){return String.prototype.split.apply(this.contents,arguments);};};dd.Token.prototype.split_contents=function(_1c3){var bit,bits=[],i=0;_1c3=_1c3||999;while(i++<_1c3&&(bit=_1ba.exec(this.contents))){bit=bit[0];if(bit.charAt(0)=="\""&&bit.slice(-1)=="\""){bits.push("\""+bit.slice(1,-1).replace("\\\"","\"").replace("\\\\","\\")+"\"");}else{if(bit.charAt(0)=="'"&&bit.slice(-1)=="'"){bits.push("'"+bit.slice(1,-1).replace("\\'","'").replace("\\\\","\\")+"'");}else{bits.push(bit);}}}return bits;};var ddt=dd.text={_get:function(_1c4,name,_1c5){var _1c6=dd.register.get(_1c4,name.toLowerCase(),_1c5);if(!_1c6){if(!_1c5){throw new Error("No tag found for "+name);}return null;}var fn=_1c6[1];var deps=_1c6[2];var _1c7;if(fn.indexOf(":")!=-1){_1c7=fn.split(":");fn=_1c7.pop();}var mod=deps;if(/\./.test(deps)){deps=deps.replace(/\./g,"/");}require([deps],function(){});var _1c8=lang.getObject(mod);return _1c8[fn||name]||_1c8[name+"_"]||_1c8[fn+"_"];},getTag:function(name,_1c9){return ddt._get("tag",name,_1c9);},getFilter:function(name,_1ca){return ddt._get("filter",name,_1ca);},getTemplate:function(file){return new dd.Template(ddt.getTemplateString(file));},getTemplateString:function(file){return xhr._getText(file.toString())||"";},_resolveLazy:function(_1cb,sync,json){if(sync){if(json){return json.fromJson(xhr._getText(_1cb))||{};}else{return dd.text.getTemplateString(_1cb);}}else{return xhr.get({handleAs:json?"json":"text",url:_1cb});}},_resolveTemplateArg:function(arg,sync){if(ddt._isTemplate(arg)){if(!sync){var d=new _1b5();d.callback(arg);return d;}return arg;}return ddt._resolveLazy(arg,sync);},_isTemplate:function(arg){return (arg===undefined)||(typeof arg=="string"&&(arg.match(/^\s*[<{]/)||arg.indexOf(" ")!=-1));},_resolveContextArg:function(arg,sync){if(arg.constructor==Object){if(!sync){var d=new _1b5;d.callback(arg);return d;}return arg;}return ddt._resolveLazy(arg,sync,true);},_re:/(?:\{\{\s*(.+?)\s*\}\}|\{%\s*(load\s*)?(.+?)\s*%\})/g,tokenize:function(str){return _1b3(str,ddt._re,ddt._parseDelims);},_parseDelims:function(varr,load,tag){if(varr){return [dd.TOKEN_VAR,varr];}else{if(load){var _1cc=lang.trim(tag).split(/\s+/g);for(var i=0,part;part=_1cc[i];i++){if(/\./.test(part)){part=part.replace(/\./g,"/");}require([part]);}}else{return [dd.TOKEN_BLOCK,tag];}}}};dd.Template=lang.extend(function(_1cd,_1ce){var str=_1ce?_1cd:ddt._resolveTemplateArg(_1cd,true)||"";var _1cf=ddt.tokenize(str);var _1d0=new dd._Parser(_1cf);this.nodelist=_1d0.parse();},{update:function(node,_1d1){return ddt._resolveContextArg(_1d1).addCallback(this,function(_1d2){var _1d3=this.render(new dd._Context(_1d2));if(node.forEach){node.forEach(function(item){item.innerHTML=_1d3;});}else{dom.byId(node).innerHTML=_1d3;}return this;});},render:function(_1d4,_1d5){_1d5=_1d5||this.getBuffer();_1d4=_1d4||new dd._Context({});return this.nodelist.render(_1d4,_1d5)+"";},getBuffer:function(){return new _1b4();}});var qfRe=/\{\{\s*(.+?)\s*\}\}/g;dd.quickFilter=function(str){if(!str){return new dd._NodeList();}if(str.indexOf("{%")==-1){return new dd._QuickNodeList(_1b3(str,qfRe,function(_1d6){return new dd._Filter(_1d6);}));}};dd._QuickNodeList=lang.extend(function(_1d7){this.contents=_1d7;},{render:function(_1d8,_1d9){for(var i=0,l=this.contents.length;i<l;i++){if(this.contents[i].resolve){_1d9=_1d9.concat(this.contents[i].resolve(_1d8));}else{_1d9=_1d9.concat(this.contents[i]);}}return _1d9;},dummyRender:function(_1da){return this.render(_1da,dd.Template.prototype.getBuffer()).toString();},clone:function(_1db){return this;}});dd._Filter=lang.extend(function(_1dc){if(!_1dc){throw new Error("Filter must be called with variable name");}this.contents=_1dc;var _1dd=this._cache[_1dc];if(_1dd){this.key=_1dd[0];this.filters=_1dd[1];}else{this.filters=[];_1b3(_1dc,this._re,this._tokenize,this);this._cache[_1dc]=[this.key,this.filters];}},{_cache:{},_re:/(?:^_\("([^\\"]*(?:\\.[^\\"])*)"\)|^"([^\\"]*(?:\\.[^\\"]*)*)"|^([a-zA-Z0-9_.]+)|\|(\w+)(?::(?:_\("([^\\"]*(?:\\.[^\\"])*)"\)|"([^\\"]*(?:\\.[^\\"]*)*)"|([a-zA-Z0-9_.]+)|'([^\\']*(?:\\.[^\\']*)*)'))?|^'([^\\']*(?:\\.[^\\']*)*)')/g,_values:{0:"\"",1:"\"",2:"",8:"\""},_args:{4:"\"",5:"\"",6:"",7:"'"},_tokenize:function(){var pos,arg;for(var i=0,has=[];i<arguments.length;i++){has[i]=(arguments[i]!==undefined&&typeof arguments[i]=="string"&&arguments[i]);}if(!this.key){for(pos in this._values){if(has[pos]){this.key=this._values[pos]+arguments[pos]+this._values[pos];break;}}}else{for(pos in this._args){if(has[pos]){var _1de=arguments[pos];if(this._args[pos]=="'"){_1de=_1de.replace(/\\'/g,"'");}else{if(this._args[pos]=="\""){_1de=_1de.replace(/\\"/g,"\"");}}arg=[!this._args[pos],_1de];break;}}var fn=ddt.getFilter(arguments[3]);if(!lang.isFunction(fn)){throw new Error(arguments[3]+" is not registered as a filter");}this.filters.push([fn,arg]);}},getExpression:function(){return this.contents;},resolve:function(_1df){if(this.key===undefined){return "";}var str=this.resolvePath(this.key,_1df);for(var i=0,_1e0;_1e0=this.filters[i];i++){if(_1e0[1]){if(_1e0[1][0]){str=_1e0[0](str,this.resolvePath(_1e0[1][1],_1df));}else{str=_1e0[0](str,_1e0[1][1]);}}else{str=_1e0[0](str);}}return str;},resolvePath:function(path,_1e1){var _1e2,_1e3;var _1e4=path.charAt(0);var last=path.slice(-1);if(!isNaN(parseInt(_1e4))){_1e2=(path.indexOf(".")==-1)?parseInt(path):parseFloat(path);}else{if(_1e4=="\""&&_1e4==last){_1e2=path.slice(1,-1);}else{if(path=="true"){return true;}if(path=="false"){return false;}if(path=="null"||path=="None"){return null;}_1e3=path.split(".");_1e2=_1e1.get(_1e3[0]);if(lang.isFunction(_1e2)){var self=_1e1.getThis&&_1e1.getThis();if(_1e2.alters_data){_1e2="";}else{if(self){_1e2=_1e2.call(self);}else{_1e2="";}}}for(var i=1;i<_1e3.length;i++){var part=_1e3[i];if(_1e2){var base=_1e2;if(lang.isObject(_1e2)&&part=="items"&&_1e2[part]===undefined){var _1e5=[];for(var key in _1e2){_1e5.push([key,_1e2[key]]);}_1e2=_1e5;continue;}if(_1e2.get&&lang.isFunction(_1e2.get)&&_1e2.get.safe){_1e2=_1e2.get(part);}else{if(_1e2[part]===undefined){_1e2=_1e2[part];break;}else{_1e2=_1e2[part];}}if(lang.isFunction(_1e2)){if(_1e2.alters_data){_1e2="";}else{_1e2=_1e2.call(base);}}else{if(_1e2 instanceof Date){_1e2=dd._Context.prototype._normalize(_1e2);}}}else{return "";}}}}return _1e2;}});dd._TextNode=dd._Node=lang.extend(function(obj){this.contents=obj;},{set:function(data){this.contents=data;return this;},render:function(_1e6,_1e7){return _1e7.concat(this.contents);},isEmpty:function(){return !lang.trim(this.contents);},clone:function(){return this;}});dd._NodeList=lang.extend(function(_1e8){this.contents=_1e8||[];this.last="";},{push:function(node){this.contents.push(node);return this;},concat:function(_1e9){this.contents=this.contents.concat(_1e9);return this;},render:function(_1ea,_1eb){for(var i=0;i<this.contents.length;i++){_1eb=this.contents[i].render(_1ea,_1eb);if(!_1eb){throw new Error("Template must return buffer");}}return _1eb;},dummyRender:function(_1ec){return this.render(_1ec,dd.Template.prototype.getBuffer()).toString();},unrender:function(){return arguments[1];},clone:function(){return this;},rtrim:function(){while(1){i=this.contents.length-1;if(this.contents[i] instanceof dd._TextNode&&this.contents[i].isEmpty()){this.contents.pop();}else{break;}}return this;}});dd._VarNode=lang.extend(function(str){this.contents=new dd._Filter(str);},{render:function(_1ed,_1ee){var str=this.contents.resolve(_1ed);if(!str.safe){str=dd._base.escape(""+str);}return _1ee.concat(str);}});dd._noOpNode=new function(){this.render=this.unrender=function(){return arguments[1];};this.clone=function(){return this;};};dd._Parser=lang.extend(function(_1ef){this.contents=_1ef;},{i:0,parse:function(_1f0){var _1f1={},_1f2;_1f0=_1f0||[];for(var i=0;i<_1f0.length;i++){_1f1[_1f0[i]]=true;}var _1f3=new dd._NodeList();while(this.i<this.contents.length){_1f2=this.contents[this.i++];if(typeof _1f2=="string"){_1f3.push(new dd._TextNode(_1f2));}else{var type=_1f2[0];var text=_1f2[1];if(type==dd.TOKEN_VAR){_1f3.push(new dd._VarNode(text));}else{if(type==dd.TOKEN_BLOCK){if(_1f1[text]){--this.i;return _1f3;}var cmd=text.split(/\s+/g);if(cmd.length){cmd=cmd[0];var fn=ddt.getTag(cmd);if(fn){_1f3.push(fn(this,new dd.Token(type,text)));}}}}}}if(_1f0.length){throw new Error("Could not find closing tag(s): "+_1f0.toString());}this.contents.length=0;return _1f3;},next_token:function(){var _1f4=this.contents[this.i++];return new dd.Token(_1f4[0],_1f4[1]);},delete_first_token:function(){this.i++;},skip_past:function(_1f5){while(this.i<this.contents.length){var _1f6=this.contents[this.i++];if(_1f6[0]==dd.TOKEN_BLOCK&&_1f6[1]==_1f5){return;}}throw new Error("Unclosed tag found when looking for "+_1f5);},create_variable_node:function(expr){return new dd._VarNode(expr);},create_text_node:function(expr){return new dd._TextNode(expr||"");},getTemplate:function(file){return new dd.Template(file);}});dd.register={_registry:{attributes:[],tags:[],filters:[]},get:function(_1f7,name){var _1f8=dd.register._registry[_1f7+"s"];for(var i=0,_1f9;_1f9=_1f8[i];i++){if(typeof _1f9[0]=="string"){if(_1f9[0]==name){return _1f9;}}else{if(name.match(_1f9[0])){return _1f9;}}}},getAttributeTags:function(){var tags=[];var _1fa=dd.register._registry.attributes;for(var i=0,_1fb;_1fb=_1fa[i];i++){if(_1fb.length==3){tags.push(_1fb);}else{var fn=lang.getObject(_1fb[1]);if(fn&&lang.isFunction(fn)){_1fb.push(fn);tags.push(_1fb);}}}return tags;},_any:function(type,base,_1fc){for(var path in _1fc){for(var i=0,fn;fn=_1fc[path][i];i++){var key=fn;if(lang.isArray(fn)){key=fn[0];fn=fn[1];}if(typeof key=="string"){if(key.substr(0,5)=="attr:"){var attr=fn;if(attr.substr(0,5)=="attr:"){attr=attr.slice(5);}dd.register._registry.attributes.push([attr.toLowerCase(),base+"."+path+"."+attr]);}key=key.toLowerCase();}dd.register._registry[type].push([key,fn,base+"."+path]);}}},tags:function(base,_1fd){dd.register._any("tags",base,_1fd);},filters:function(base,_1fe){dd.register._any("filters",base,_1fe);}};var _1ff=/&/g;var _200=/</g;var _201=/>/g;var _202=/'/g;var _203=/"/g;dd._base.escape=function(_204){return dd.mark_safe(_204.replace(_1ff,"&amp;").replace(_200,"&lt;").replace(_201,"&gt;").replace(_203,"&quot;").replace(_202,"&#39;"));};dd._base.safe=function(_205){if(typeof _205=="string"){_205=new String(_205);}if(typeof _205=="object"){_205.safe=true;}return _205;};dd.mark_safe=dd._base.safe;dd.register.tags("dojox.dtl.tag",{"date":["now"],"logic":["if","for","ifequal","ifnotequal"],"loader":["extends","block","include","load","ssi"],"misc":["comment","debug","filter","firstof","spaceless","templatetag","widthratio","with"],"loop":["cycle","ifchanged","regroup"]});dd.register.filters("dojox.dtl.filter",{"dates":["date","time","timesince","timeuntil"],"htmlstrings":["linebreaks","linebreaksbr","removetags","striptags"],"integers":["add","get_digit"],"lists":["dictsort","dictsortreversed","first","join","length","length_is","random","slice","unordered_list"],"logic":["default","default_if_none","divisibleby","yesno"],"misc":["filesizeformat","pluralize","phone2numeric","pprint"],"strings":["addslashes","capfirst","center","cut","fix_ampersands","floatformat","iriencode","linenumbers","ljust","lower","make_list","rjust","slugify","stringformat","title","truncatewords","truncatewords_html","upper","urlencode","urlize","urlizetrunc","wordcount","wordwrap"]});dd.register.filters("dojox.dtl",{"_base":["escape","safe"]});return dd;});},"dojox/string/tokenize":function(){define("dojox/string/tokenize",["dojo/_base/lang","dojo/_base/sniff"],function(lang,has){var _206=lang.getObject("dojox.string",true).tokenize;_206=function(str,re,_207,_208){var _209=[];var _20a,_20b,_20c=0;while(_20a=re.exec(str)){_20b=str.slice(_20c,re.lastIndex-_20a[0].length);if(_20b.length){_209.push(_20b);}if(_207){if(has("opera")){var copy=_20a.slice(0);while(copy.length<_20a.length){copy.push(null);}_20a=copy;}var _20d=_207.apply(_208,_20a.slice(1).concat(_209.length));if(typeof _20d!="undefined"){_209.push(_20d);}}_20c=re.lastIndex;}_20b=str.slice(_20c);if(_20b.length){_209.push(_20b);}return _209;};return _206;});},"dojox/string/Builder":function(){define("dojox/string/Builder",["dojo/_base/lang"],function(lang){lang.getObject("string",true,dojox).Builder=function(str){var b="";this.length=0;this.append=function(s){if(arguments.length>1){var tmp="",l=arguments.length;switch(l){case 9:tmp=""+arguments[8]+tmp;case 8:tmp=""+arguments[7]+tmp;case 7:tmp=""+arguments[6]+tmp;case 6:tmp=""+arguments[5]+tmp;case 5:tmp=""+arguments[4]+tmp;case 4:tmp=""+arguments[3]+tmp;case 3:tmp=""+arguments[2]+tmp;case 2:b+=""+arguments[0]+arguments[1]+tmp;break;default:var i=0;while(i<arguments.length){tmp+=arguments[i++];}b+=tmp;}}else{b+=s;}this.length=b.length;return this;};this.concat=function(s){return this.append.apply(this,arguments);};this.appendArray=function(_20e){return this.append.apply(this,_20e);};this.clear=function(){b="";this.length=0;return this;};this.replace=function(_20f,_210){b=b.replace(_20f,_210);this.length=b.length;return this;};this.remove=function(_211,len){if(len===undefined){len=b.length;}if(len==0){return this;}b=b.substr(0,_211)+b.substr(_211+len);this.length=b.length;return this;};this.insert=function(_212,str){if(_212==0){b=str+b;}else{b=b.slice(0,_212)+str+b.slice(_212);}this.length=b.length;return this;};this.toString=function(){return b;};if(str){this.append(str);}};return dojox.string.Builder;});},"url:epi-packaging/templates/UploadResults.htm":"<div>\r\n    <div class=\"epi-paddingVertical-small\">\r\n        <table class=\"epi-default\" dojoAttachPoint=\"installedTable\">\r\n            <thead>\r\n                <tr>\r\n                    <th>\r\n                        ${res.headerindex}\r\n                    </th>\r\n                    <th>\r\n                        ${res.headerfile}\r\n                    </th>\r\n                    <th>\r\n                        ${res.headersize}\r\n                    </th>\r\n                    <th>\r\n                        ${res.headerid}\r\n                    </th>\r\n                    <th>\r\n                        ${res.headertitle}\r\n                    </th>\r\n                    <th>\r\n                        ${res.headersummary}\r\n                    </th>\r\n                    <th>\r\n                        ${res.headerdescription}\r\n                    </th>\r\n                    <th>\r\n                        ${res.headerstatus}\r\n                    </th>\r\n                </tr>\r\n            </thead>\r\n            {% for uploadedFile in files %}\r\n            <tr>\r\n                <td>\r\n                    {{ uploadedFile.index }}\r\n                </td>\r\n                <td>\r\n                    {{ uploadedFile.packageFileName|safe }}\r\n                </td>\r\n                <td class=\"sizeColumn\">\r\n                    {{ uploadedFile.sizeStr }}\r\n                </td>\r\n\r\n                {% if uploadedFile.packageInfo.isInstalled %}\r\n                <td>\r\n                    {{ uploadedFile.packageInfo.id|safe }}\r\n                </td>\r\n                <td>\r\n                    {{ uploadedFile.packageInfo.title|safe }}\r\n                </td>\r\n                <td>\r\n                    {{ uploadedFile.packageInfo.summary|safe }}\r\n                </td>\r\n                <td>\r\n                    {{ uploadedFile.packageInfo.description|safe }}\r\n                </td>\r\n                <td>\r\n                    <span class=\"dijitInline dijitIcon epi-iconCheckmark\"></span>\r\n                </td>\r\n                {% else %}\r\n                <td colspan=\"4\">\r\n                    <div class=\"epi-errorText\">\r\n                        <ul>\r\n                            {% for error in uploadedFile.errors %}\r\n                            <li>{{ error }}</li>\r\n                            {% endfor %}\r\n                        </ul>\r\n\r\n                        <ul>\r\n                            {% for error in uploadedFile.packageInfo.errors %}\r\n                            <li>{{ error }}</li>\r\n                            {% endfor %}\r\n                        </ul>\r\n                    </div>\r\n                </td>\r\n                <td class=\"failureIcon\">\r\n                </td>\r\n                {% endif %}\r\n            </tr>\r\n            {% endfor %}\r\n        </table>\r\n    </div>\r\n</div>","dojox/dtl/tag/logic":function(){define("dojox/dtl/tag/logic",["dojo/_base/lang","../_base"],function(lang,dd){lang.getObject("dojox.dtl.tag.logic",true);var ddt=dd.text;var ddtl=dd.tag.logic;ddtl.IfNode=lang.extend(function(_213,_214,_215,type){this.bools=_213;this.trues=_214;this.falses=_215;this.type=type;},{render:function(_216,_217){var i,bool,_218,_219,_21a;if(this.type=="or"){for(i=0;bool=this.bools[i];i++){_218=bool[0];_219=bool[1];_21a=_219.resolve(_216);if((_21a&&!_218)||(_218&&!_21a)){if(this.falses){_217=this.falses.unrender(_216,_217);}return (this.trues)?this.trues.render(_216,_217,this):_217;}}if(this.trues){_217=this.trues.unrender(_216,_217);}return (this.falses)?this.falses.render(_216,_217,this):_217;}else{for(i=0;bool=this.bools[i];i++){_218=bool[0];_219=bool[1];_21a=_219.resolve(_216);if(_21a==_218){if(this.trues){_217=this.trues.unrender(_216,_217);}return (this.falses)?this.falses.render(_216,_217,this):_217;}}if(this.falses){_217=this.falses.unrender(_216,_217);}return (this.trues)?this.trues.render(_216,_217,this):_217;}return _217;},unrender:function(_21b,_21c){_21c=(this.trues)?this.trues.unrender(_21b,_21c):_21c;_21c=(this.falses)?this.falses.unrender(_21b,_21c):_21c;return _21c;},clone:function(_21d){var _21e=(this.trues)?this.trues.clone(_21d):null;var _21f=(this.falses)?this.falses.clone(_21d):null;return new this.constructor(this.bools,_21e,_21f,this.type);}});ddtl.IfEqualNode=lang.extend(function(var1,var2,_220,_221,_222){this.var1=new dd._Filter(var1);this.var2=new dd._Filter(var2);this.trues=_220;this.falses=_221;this.negate=_222;},{render:function(_223,_224){var var1=this.var1.resolve(_223);var var2=this.var2.resolve(_223);var1=(typeof var1!="undefined")?var1:"";var2=(typeof var1!="undefined")?var2:"";if((this.negate&&var1!=var2)||(!this.negate&&var1==var2)){if(this.falses){_224=this.falses.unrender(_223,_224,this);}return (this.trues)?this.trues.render(_223,_224,this):_224;}if(this.trues){_224=this.trues.unrender(_223,_224,this);}return (this.falses)?this.falses.render(_223,_224,this):_224;},unrender:function(_225,_226){return ddtl.IfNode.prototype.unrender.call(this,_225,_226);},clone:function(_227){var _228=this.trues?this.trues.clone(_227):null;var _229=this.falses?this.falses.clone(_227):null;return new this.constructor(this.var1.getExpression(),this.var2.getExpression(),_228,_229,this.negate);}});ddtl.ForNode=lang.extend(function(_22a,loop,_22b,_22c){this.assign=_22a;this.loop=new dd._Filter(loop);this.reversed=_22b;this.nodelist=_22c;this.pool=[];},{render:function(_22d,_22e){var i,j,k;var _22f=false;var _230=this.assign;for(k=0;k<_230.length;k++){if(typeof _22d[_230[k]]!="undefined"){_22f=true;_22d=_22d.push();break;}}if(!_22f&&_22d.forloop){_22f=true;_22d=_22d.push();}var _231=this.loop.resolve(_22d)||[];for(i=_231.length;i<this.pool.length;i++){this.pool[i].unrender(_22d,_22e,this);}if(this.reversed){_231=_231.slice(0).reverse();}var _232=lang.isObject(_231)&&!lang.isArrayLike(_231);var _233=[];if(_232){for(var key in _231){_233.push(_231[key]);}}else{_233=_231;}var _234=_22d.forloop={parentloop:_22d.get("forloop",{})};var j=0;for(i=0;i<_233.length;i++){var item=_233[i];_234.counter0=j;_234.counter=j+1;_234.revcounter0=_233.length-j-1;_234.revcounter=_233.length-j;_234.first=!j;_234.last=(j==_233.length-1);if(_230.length>1&&lang.isArrayLike(item)){if(!_22f){_22f=true;_22d=_22d.push();}var _235={};for(k=0;k<item.length&&k<_230.length;k++){_235[_230[k]]=item[k];}lang.mixin(_22d,_235);}else{_22d[_230[0]]=item;}if(j+1>this.pool.length){this.pool.push(this.nodelist.clone(_22e));}_22e=this.pool[j++].render(_22d,_22e,this);}delete _22d.forloop;if(_22f){_22d=_22d.pop();}else{for(k=0;k<_230.length;k++){delete _22d[_230[k]];}}return _22e;},unrender:function(_236,_237){for(var i=0,pool;pool=this.pool[i];i++){_237=pool.unrender(_236,_237);}return _237;},clone:function(_238){return new this.constructor(this.assign,this.loop.getExpression(),this.reversed,this.nodelist.clone(_238));}});lang.mixin(ddtl,{if_:function(_239,_23a){var i,part,type,_23b=[],_23c=_23a.contents.split();_23c.shift();_23a=_23c.join(" ");_23c=_23a.split(" and ");if(_23c.length==1){type="or";_23c=_23a.split(" or ");}else{type="and";for(i=0;i<_23c.length;i++){if(_23c[i].indexOf(" or ")!=-1){throw new Error("'if' tags can't mix 'and' and 'or'");}}}for(i=0;part=_23c[i];i++){var not=false;if(part.indexOf("not ")==0){part=part.slice(4);not=true;}_23b.push([not,new dd._Filter(part)]);}var _23d=_239.parse(["else","endif"]);var _23e=false;var _23a=_239.next_token();if(_23a.contents=="else"){_23e=_239.parse(["endif"]);_239.next_token();}return new ddtl.IfNode(_23b,_23d,_23e,type);},_ifequal:function(_23f,_240,_241){var _242=_240.split_contents();if(_242.length!=3){throw new Error(_242[0]+" takes two arguments");}var end="end"+_242[0];var _243=_23f.parse(["else",end]);var _244=false;var _240=_23f.next_token();if(_240.contents=="else"){_244=_23f.parse([end]);_23f.next_token();}return new ddtl.IfEqualNode(_242[1],_242[2],_243,_244,_241);},ifequal:function(_245,_246){return ddtl._ifequal(_245,_246);},ifnotequal:function(_247,_248){return ddtl._ifequal(_247,_248,true);},for_:function(_249,_24a){var _24b=_24a.contents.split();if(_24b.length<4){throw new Error("'for' statements should have at least four words: "+_24a.contents);}var _24c=_24b[_24b.length-1]=="reversed";var _24d=(_24c)?-3:-2;if(_24b[_24b.length+_24d]!="in"){throw new Error("'for' tag received an invalid argument: "+_24a.contents);}var _24e=_24b.slice(1,_24d).join(" ").split(/ *, */);for(var i=0;i<_24e.length;i++){if(!_24e[i]||_24e[i].indexOf(" ")!=-1){throw new Error("'for' tag received an invalid argument: "+_24a.contents);}}var _24f=_249.parse(["endfor"]);_249.next_token();return new ddtl.ForNode(_24e,_24b[_24b.length+_24d+1],_24c,_24f);}});return dojox.dtl.tag.logic;});},"epi-packaging/SelectedFiles":function(){define(["dojo","dijit","dojox/form/uploader/FileList","dojo/text!./templates/SelectedFiles.htm","epi/i18n!epi/packaging/nls/EPiServer.Packaging.UI.SelectedFiles"],function(dojo,_250,_251,_252,res){return dojo.declare(_251,{res:res,templateString:_252,hideProgress:function(){},showProgress:function(){},reset:function(){this.inherited(arguments);this._changeListVisibility();},_progress:function(_253){},_onUploaderChange:function(_254){this.inherited(arguments);this._changeListVisibility();},_changeListVisibility:function(){if(this.rowAmt==0){dojo.style(this.listContainer,"display","none");}else{dojo.style(this.listContainer,"display","block");}},_addRow:function(_255,type,name){var c,r=this.listNode.insertRow(-1);c=r.insertCell(-1);dojo.addClass(c,"dojoxUploaderIndex");c.textContent=_255;c=r.insertCell(-1);dojo.addClass(c,"dojoxUploaderIcon");c.textContent=type;c=r.insertCell(-1);dojo.addClass(c,"dojoxUploaderFileName");c.textContent=name;this.rowAmt++;}});});},"dojox/form/uploader/FileList":function(){define("dojox/form/uploader/FileList",["dojo/_base/fx","dojo/dom-style","dojo/dom-class","dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dijit/_base/manager","dojox/form/uploader/Base"],function(fx,_256,_257,_258,lang,_259,_25a,_25b){return _258("dojox.form.uploader.FileList",[_25b],{uploaderId:"",uploader:null,headerIndex:"#",headerType:"Type",headerFilename:"File Name",headerFilesize:"Size",_upCheckCnt:0,rowAmt:0,templateString:"<div class=\"dojoxUploaderFileList\">"+"<div dojoAttachPoint=\"progressNode\" class=\"dojoxUploaderFileListProgress\"><div dojoAttachPoint=\"percentBarNode\" class=\"dojoxUploaderFileListProgressBar\"></div><div dojoAttachPoint=\"percentTextNode\" class=\"dojoxUploaderFileListPercentText\">0%</div></div>"+"<table class=\"dojoxUploaderFileListTable\">"+"<thead><tr class=\"dojoxUploaderFileListHeader\"><th class=\"dojoxUploaderIndex\">${headerIndex}</th><th class=\"dojoxUploaderIcon\">${headerType}</th><th class=\"dojoxUploaderFileName\">${headerFilename}</th><th class=\"dojoxUploaderFileSize\" dojoAttachPoint=\"sizeHeader\">${headerFilesize}</th></tr></thead>"+"<tbody class=\"dojoxUploaderFileListContent\" dojoAttachPoint=\"listNode\">"+"</tbody>"+"</table>"+"<div>",postCreate:function(){this.setUploader();this.hideProgress();},reset:function(){for(var i=0;i<this.rowAmt;i++){this.listNode.deleteRow(0);}this.rowAmt=0;},setUploader:function(){if(!this.uploaderId&&!this.uploader){}else{if(this.uploaderId&&!this.uploader){this.uploader=_25a.byId(this.uploaderId);}else{if(this._upCheckCnt>4){return;}}}if(this.uploader){this.connect(this.uploader,"onChange","_onUploaderChange");this.connect(this.uploader,"reset","reset");this.connect(this.uploader,"onBegin",function(){this.showProgress(true);});this.connect(this.uploader,"onProgress","_progress");this.connect(this.uploader,"onComplete",function(){setTimeout(lang.hitch(this,function(){this.hideProgress(true);}),1250);});if(!(this._fileSizeAvail={"html5":1,"flash":1}[this.uploader.uploadType])){this.sizeHeader.style.display="none";}}else{this._upCheckCnt++;setTimeout(lang.hitch(this,"setUploader"),250);}},hideProgress:function(_25c){var o=_25c?{ani:true,endDisp:"none",beg:15,end:0}:{endDisp:"none",ani:false};this._hideShowProgress(o);},showProgress:function(_25d){var o=_25d?{ani:true,endDisp:"block",beg:0,end:15}:{endDisp:"block",ani:false};this._hideShowProgress(o);},_progress:function(_25e){this.percentTextNode.innerHTML=_25e.percent;_256.set(this.percentBarNode,"width",_25e.percent);},_hideShowProgress:function(o){var node=this.progressNode;var _25f=function(){_256.set(node,"display",o.endDisp);};if(o.ani){_256.set(node,"display","block");fx.animateProperty({node:node,properties:{height:{start:o.beg,end:o.end,units:"px"}},onEnd:_25f}).play();}else{_25f();}},_onUploaderChange:function(_260){this.reset();_259.forEach(_260,function(f,i){this._addRow(i+1,this.getFileType(f.name),f.name,f.size);},this);},_addRow:function(_261,type,name,size){var c,r=this.listNode.insertRow(-1);c=r.insertCell(-1);_257.add(c,"dojoxUploaderIndex");c.innerHTML=_261;c=r.insertCell(-1);_257.add(c,"dojoxUploaderIcon");c.innerHTML=type;c=r.insertCell(-1);_257.add(c,"dojoxUploaderFileName");c.innerHTML=name;if(this._fileSizeAvail){c=r.insertCell(-1);_257.add(c,"dojoxUploaderSize");c.innerHTML=this.convertBytes(size).value;}this.rowAmt++;}});});},"url:epi-packaging/templates/SelectedFiles.htm":"<div class=\"dojoxUploaderFileList\" data-dojo-attach-point=\"listContainer\" style=\"display:none\">\r\n    <span>${res.fileslisttitle}</span>\r\n    <div data-dojo-attach-point=\"sizeHeader\" style=\"display:none;\"></div>\r\n    <table class=\"dojoxUploaderFileListTable epi-default\" data-dojo-attach-point=\"listTable\">\r\n        <thead>\r\n            <tr class=\"dojoxUploaderFileListHeader\">\r\n                <th class=\"dojoxUploaderIndex\">\r\n                    ${res.headerindex}\r\n                </th>\r\n                <th class=\"dojoxUploaderIcon\">\r\n                    ${res.headertype}\r\n                </th>\r\n                <th class=\"dojoxUploaderFileName\">\r\n                    ${res.headerfile}\r\n                </th>\r\n            </tr>\r\n        </thead>\r\n        <tbody data-dojo-attach-point=\"listNode\"></tbody>\r\n    </table>\r\n</div>\r\n","dojox/form/uploader/plugins/IFrame":function(){define("dojox/form/uploader/plugins/IFrame",["dojo/dom-construct","dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/io/iframe","dojox/form/uploader/plugins/HTML5"],function(_262,_263,lang,_264,_265,_266){var _267=_263("dojox.form.uploader.plugins.IFrame",[],{force:"",postMixInProperties:function(){this.inherited(arguments);if(!this.supports("multiple")||this.force=="iframe"){this.uploadType="iframe";this.upload=this.uploadIFrame;}},uploadIFrame:function(data){var form,_268=false;if(!this.getForm()){form=_262.place("<form enctype=\"multipart/form-data\" method=\"post\"></form>",this.domNode);_264.forEach(this._inputs,function(n,i){if(n.value){form.appendChild(n);}},this);_268=true;}else{form=this.form;}var url=this.getUrl();var dfd=_265.send({url:url,form:form,handleAs:"json",content:data,method:"POST",error:lang.hitch(this,function(err){console.error("error parsing server result",err);if(_268){_262.destroy(form);}this.onError(err);}),load:lang.hitch(this,function(data,_269,_26a){if(_268){_262.destroy(form);}if(data["ERROR"]||data["error"]){this.onError(data);}else{this.onComplete(data);}})});}});dojox.form.addUploaderPlugin(_267);return _267;});},"dojo/io/iframe":function(){define("dojo/io/iframe",["../_base/config","../_base/json","../_base/kernel","../_base/lang","../_base/xhr","../sniff","../_base/window","../dom","../dom-construct","../query","require","../aspect","../request/iframe"],function(_26b,json,_26c,lang,xhr,has,win,dom,_26d,_26e,_26f,_270,_271){_26c.deprecated("dojo/io/iframe","Use dojo/request/iframe.","2.0");var mid=_271._iframeName;mid=mid.substring(0,mid.lastIndexOf("_"));var _272=lang.delegate(_271,{create:function(){return _272._frame=_271.create.apply(_271,arguments);},get:null,post:null,send:function(args){var rDfd;var dfd=xhr._ioSetArgs(args,function(dfd){rDfd&&rDfd.cancel();},function(dfd){var _273=null,_274=dfd.ioArgs;try{var _275=_274.handleAs;if(_275==="xml"||_275==="html"){_273=rDfd.response.data;}else{_273=rDfd.response.text;if(_275==="json"){_273=json.fromJson(_273);}else{if(_275==="javascript"){_273=_26c.eval(_273);}}}}catch(e){_273=e;}return _273;},function(_276,dfd){dfd.ioArgs._hasError=true;return _276;});var _277=dfd.ioArgs;var _278="GET",form=dom.byId(args.form);if(args.method&&args.method.toUpperCase()==="POST"&&form){_278="POST";}var _279={method:_278,handleAs:args.handleAs==="json"||args.handleAs==="javascript"?"text":args.handleAs,form:args.form,query:form?null:args.content,data:form?args.content:null,timeout:args.timeout,ioArgs:_277};if(_279.method){_279.method=_279.method.toUpperCase();}if(_26b.ioPublish&&_26c.publish&&_277.args.ioPublish!==false){var _27a=_270.after(_271,"_notifyStart",function(data){if(data.options.ioArgs===_277){_27a.remove();xhr._ioNotifyStart(dfd);}},true);}rDfd=_271(_277.url,_279,true);_277._callNext=rDfd._callNext;rDfd.then(function(){dfd.resolve(dfd);}).otherwise(function(_27b){dfd.ioArgs.error=_27b;dfd.reject(_27b);});return dfd;},_iframeOnload:win.global[mid+"_onload"]});lang.setObject("dojo.io.iframe",_272);return _272;});},"dojo/request/iframe":function(){define("dojo/request/iframe",["module","require","./watch","./util","./handlers","../_base/lang","../io-query","../query","../has","../dom","../dom-construct","../_base/window","../NodeList-dom"],function(_27c,_27d,_27e,util,_27f,lang,_280,_281,has,dom,_282,win){var mid=_27c.id.replace(/[\/\.\-]/g,"_"),_283=mid+"_onload";if(!win.global[_283]){win.global[_283]=function(){var dfd=_284._currentDfd;if(!dfd){_284._fireNextRequest();return;}var _285=dfd.response,_286=_285.options,_287=dom.byId(_286.form)||dfd._tmpForm;if(_287){var _288=dfd._contentToClean;for(var i=0;i<_288.length;i++){var key=_288[i];for(var j=0;j<_287.childNodes.length;j++){var _289=_287.childNodes[j];if(_289.name===key){_282.destroy(_289);break;}}}dfd._originalAction&&_287.setAttribute("action",dfd._originalAction);if(dfd._originalMethod){_287.setAttribute("method",dfd._originalMethod);_287.method=dfd._originalMethod;}if(dfd._originalTarget){_287.setAttribute("target",dfd._originalTarget);_287.target=dfd._originalTarget;}}if(dfd._tmpForm){_282.destroy(dfd._tmpForm);delete dfd._tmpForm;}dfd._finished=true;};}function _28a(name,_28b,uri){if(win.global[name]){return win.global[name];}if(win.global.frames[name]){return win.global.frames[name];}if(!uri){if(has("config-useXDomain")&&!has("config-dojoBlankHtmlUrl")){}uri=(has("config-dojoBlankHtmlUrl")||_27d.toUrl("dojo/resources/blank.html"));}var _28c=_282.place("<iframe id=\""+name+"\" name=\""+name+"\" src=\""+uri+"\" onload=\""+_28b+"\" style=\"position: absolute; left: 1px; top: 1px; height: 1px; width: 1px; visibility: hidden\">",win.body());win.global[name]=_28c;return _28c;};function _28d(_28e,src,_28f){var _290=win.global.frames[_28e.name];if(_290.contentWindow){_290=_290.contentWindow;}try{if(!_28f){_290.location=src;}else{_290.location.replace(src);}}catch(e){}};function doc(_291){if(_291.contentDocument){return _291.contentDocument;}var name=_291.name;if(name){var _292=win.doc.getElementsByTagName("iframe");if(_291.document&&_292[name].contentWindow&&_292[name].contentWindow.document){return _292[name].contentWindow.document;}else{if(win.doc.frames[name]&&win.doc.frames[name].document){return win.doc.frames[name].document;}}}return null;};function _293(){return _282.create("form",{name:mid+"_form",style:{position:"absolute",top:"-1000px",left:"-1000px"}},win.body());};function _294(){var dfd;try{if(_284._currentDfd||!_284._dfdQueue.length){return;}do{dfd=_284._currentDfd=_284._dfdQueue.shift();}while(dfd&&(dfd.canceled||(dfd.isCanceled&&dfd.isCanceled()))&&_284._dfdQueue.length);if(!dfd||dfd.canceled||(dfd.isCanceled&&dfd.isCanceled())){_284._currentDfd=null;return;}var _295=dfd.response,_296=_295.options,c2c=dfd._contentToClean=[],_297=dom.byId(_296.form),_298=util.notify,data=_296.data||null,_299;if(!dfd._legacy&&_296.method==="POST"&&!_297){_297=dfd._tmpForm=_293();}else{if(_296.method==="GET"&&_297&&_295.url.indexOf("?")>-1){_299=_295.url.slice(_295.url.indexOf("?")+1);data=lang.mixin(_280.queryToObject(_299),data);}}if(_297){if(!dfd._legacy){var _29a=_297;do{_29a=_29a.parentNode;}while(_29a&&_29a!==win.doc.documentElement);if(!_29a){_297.style.position="absolute";_297.style.left="-1000px";_297.style.top="-1000px";win.body().appendChild(_297);}if(!_297.name){_297.name=mid+"_form";}}if(data){var _29b=function(name,_29c){_282.create("input",{type:"hidden",name:name,value:_29c},_297);c2c.push(name);};for(var x in data){var val=data[x];if(lang.isArray(val)&&val.length>1){for(var i=0;i<val.length;i++){_29b(x,val[i]);}}else{if(!_297[x]){_29b(x,val);}else{_297[x].value=val;}}}}var _29d=_297.getAttributeNode("action"),_29e=_297.getAttributeNode("method"),_29f=_297.getAttributeNode("target");if(_295.url){dfd._originalAction=_29d?_29d.value:null;if(_29d){_29d.value=_295.url;}else{_297.setAttribute("action",_295.url);}}if(!dfd._legacy){dfd._originalMethod=_29e?_29e.value:null;if(_29e){_29e.value=_296.method;}else{_297.setAttribute("method",_296.method);}}else{if(!_29e||!_29e.value){if(_29e){_29e.value=_296.method;}else{_297.setAttribute("method",_296.method);}}}dfd._originalTarget=_29f?_29f.value:null;if(_29f){_29f.value=_284._iframeName;}else{_297.setAttribute("target",_284._iframeName);}_297.target=_284._iframeName;_298&&_298.emit("send",_295,dfd.promise.cancel);_284._notifyStart(_295);_297.submit();}else{var _2a0="";if(_295.options.data){_2a0=_295.options.data;if(typeof _2a0!=="string"){_2a0=_280.objectToQuery(_2a0);}}var _2a1=_295.url+(_295.url.indexOf("?")>-1?"&":"?")+_2a0;_298&&_298.emit("send",_295,dfd.promise.cancel);_284._notifyStart(_295);_284.setSrc(_284._frame,_2a1,true);}}catch(e){dfd.reject(e);}};function _2a2(_2a3){return !this.isFulfilled();};function _2a4(_2a5){return !!this._finished;};function _2a6(_2a7,_2a8){if(!_2a8){try{var _2a9=_2a7.options,doc=_284.doc(_284._frame),_2aa=_2a9.handleAs;if(_2aa!=="html"){if(_2aa==="xml"){if(doc.documentElement.tagName.toLowerCase()==="html"){_281("a",doc.documentElement).orphan();var _2ab=doc.documentElement.innerText;_2ab=_2ab.replace(/>\s+</g,"><");_2a7.text=lang.trim(_2ab);}else{_2a7.data=doc;}}else{_2a7.text=doc.getElementsByTagName("textarea")[0].value;}_27f(_2a7);}else{_2a7.data=doc;}}catch(e){_2a8=e;}}if(_2a8){this.reject(_2a8);}else{if(this._finished){this.resolve(_2a7);}else{this.reject(new Error("Invalid dojo/request/iframe request state"));}}};function last(_2ac){this._callNext();};var _2ad={method:"POST"};function _284(url,_2ae,_2af){var _2b0=util.parseArgs(url,util.deepCreate(_2ad,_2ae),true);url=_2b0.url;_2ae=_2b0.options;if(_2ae.method!=="GET"&&_2ae.method!=="POST"){throw new Error(_2ae.method+" not supported by dojo/request/iframe");}if(!_284._frame){_284._frame=_284.create(_284._iframeName,_283+"();");}var dfd=util.deferred(_2b0,null,_2a2,_2a4,_2a6,last);dfd._callNext=function(){if(!this._calledNext){this._calledNext=true;_284._currentDfd=null;_284._fireNextRequest();}};dfd._legacy=_2af;_284._dfdQueue.push(dfd);_284._fireNextRequest();_27e(dfd);return _2af?dfd:dfd.promise;};_284.create=_28a;_284.doc=doc;_284.setSrc=_28d;_284._iframeName=mid+"_IoIframe";_284._notifyStart=function(){};_284._dfdQueue=[];_284._currentDfd=null;_284._fireNextRequest=_294;util.addCommonMethods(_284,["GET","POST"]);return _284;});},"url:epi-packaging/templates/PackageUpload.htm":"<div>\r\n    <!-- Upload form -->\r\n    <form method=\"post\" action=\"${_uploadUrl}\" enctype=\"multipart/form-data\">\r\n        <div class=\"uploaderButton\" >\r\n            <input dojoAttachPoint=\"_uploaderInput\" type=\"file\" />\r\n        </div>\r\n        <input type=\"submit\" dojoAttachPoint=\"_installButton\" label=\"${res.buttoninstall}\" data-dojo-type=\"dijit/form/Button\" />\r\n        <input type=\"reset\" dojoAttachPoint=\"_clearButton\" label=\"${res.buttonclear}\" data-dojo-type=\"dijit/form/Button\" />\r\n        <div class=\"epi-paddingVertical-small\">\r\n            <!-- Selected files -->\r\n            <div dojoAttachPoint=\"_fileListNode\"></div>\r\n            <!-- Uploaded file -->\r\n            <div dojoAttachPoint=\"_uploadResultsNode\"></div>\r\n        </div>\r\n        <input type=\"hidden\" dojoAttachPoint=\"_uploadType\" name=\"uploadType\" />\r\n    </form>\r\n</div>\r\n","epi-packaging/RootContainer":function(){define(["epi","dojo","dijit","dijit/layout/BorderContainer","epi-packaging/AntiForgeryData","epi-packaging/Toolbar","epi-packaging/NavigationMenu","epi/shell/widget/WidgetSwitcher","dijit/layout/ContentPane","epi-packaging/Notification"],function(epi,dojo,_2b1,_2b2,_2b3,_2b4,_2b5,_2b6,_2b7,_2b8){return dojo.declare([_2b2],{_antiForgeryData:null,startup:function(){if(this._started){return;}this._antiForgeryData=new _2b3(this.antiForgeryToken);if(this.installationMode==="UI"){var _2b9=new _2b4();var _2ba=new _2b7({region:"top",content:_2b9});this.addChild(_2ba);}else{var _2bb=new _2b8();var _2ba=new _2b7({region:"top",content:_2bb});this.addChild(_2ba);}var _2bc=new _2b5({antiForgeryData:this._antiForgeryData});var _2bd=new _2b7({region:"left",content:_2bc,style:"width: 17em"});this.addChild(_2bd);var _2be=new _2b6({componentConstructorArgs:{antiForgeryData:this._antiForgeryData},supportedContextTypes:[]});var _2bf=new _2b7({region:"center",content:_2be});this.addChild(_2bf);this.inherited(arguments);}});});},"epi-packaging/Toolbar":function(){define(["dojo/_base/declare","dojo/topic","dijit/layout/ContentPane","epi/shell/widget/ToolbarSet","epi/i18n!epi/packaging/nls/EPiServer.Packaging.UI.Toolbar"],function(_2c0,_2c1,_2c2,_2c3,res){return _2c0([_2c3],{res:res,constructor:function(){this.layoutContainerClass=_2c2;},postCreate:function(){this.add([{name:"upload",label:this.res.uploadbuttonlabel,action:function(){_2c1.publish("/epi/shell/action/changeview","epi-packaging/UploadSection");}},{name:"restartWarning",widgetType:"epi-packaging/SiteRestartWarning"}]);this.inherited(arguments);},destroy:function(){this.inherited(arguments);}});});},"epi-packaging/Notification":function(){require({cache:{"url:epi-packaging/templates/Notification.htm":"<span>\n    <h4>${res.codemode}</h4>\n</span>"}});define("epi-packaging/Notification",["dojo","dijit/_WidgetBase","dijit/_TemplatedMixin","dojo/text!./templates/Notification.htm","epi/i18n!epi/packaging/nls/EPiServer.Packaging.UI.Toolbar"],function(dojo,_2c4,_2c5,_2c6,res){return dojo.declare([_2c4,_2c5],{res:res,templateString:_2c6});});},"url:epi-packaging/templates/Notification.htm":"<span>\n    <h4>${res.codemode}</h4>\n</span>","epi-packaging/SiteRestartWarning":function(){define(["dojo","dijit","epi/dependency","dijit/_Widget","dijit/_TemplatedMixin","dojo/text!./templates/SiteRestartWarning.htm","epi/i18n!epi/packaging/nls/EPiServer.Packaging.UI.SiteRestartWarning"],function(dojo,_2c7,_2c8,_2c9,_2ca,_2cb,res){return dojo.declare([_2c9,_2ca],{res:res,helpUrl:null,templateString:_2cb,postMixInProperties:function(){var _2cc=_2c8.resolve("epi.ModuleManager");var _2cd=_2cc.getModule("CMS");this.helpUrl=_2cd.helpPath+"#addons";this.inherited(arguments);}});});},"url:epi-packaging/templates/SiteRestartWarning.htm":"<div class=\"epi-addonsRestartWarningContainer dijitInline\">\r\n    <span class=\"epi-addonsRestartWarningMessage\">${res.message} <a class=\"epi-visibleLink\" href=\"${helpUrl}\" onclick=\"window.open('${helpUrl}','_blank', 'scrollbars=yes, location=no, menubar=no, resizable=yes, toolbar=no, height=500, width=840');return false;\" target=\"_blank\"  >${res.learnmorelabel}</a></span>\r\n</div>","epi-packaging/UpdateableSection":function(){define(["dojo","dijit","epi/routes","dijit/layout/_LayoutWidget","dijit/_TemplatedMixin","epi-packaging/SectionHeader","epi-packaging/ModulesList","dojo/text!./templates/Section.htm","epi/i18n!epi/packaging/nls/EPiServer.Packaging.UI.UpdateableSection"],function(dojo,_2ce,_2cf,_2d0,_2d1,_2d2,_2d3,_2d4,res){return dojo.declare([_2d0,_2d1],{res:res,templateString:_2d4,antiForgeryData:null,_headerWidget:null,_listWidget:null,startup:function(){if(this._started){return;}this._headerWidget=new _2d2({webHelpAlias:"updateableaddons",antiForgeryData:this.antiForgeryData,sectionTitle:this.res.title},this._headerPlaceholder);this._headerWidget.startup();this._listWidget=new _2d3({antiForgeryData:this.antiForgeryData,hideModuleInListOnAction:true,emptyListMessage:this.res.emptylistmessage,listingUrl:_2cf.getActionPath({moduleArea:"EPiServer.Packaging.UI",controller:"AddOns",action:"GetUpdateableModules"})},this._contentPlaceholder);this._listWidget.startup();this.connect(this._listWidget,"onSiteRestartRequired",function(){this._headerWidget.updateView();});this.connect(this._listWidget,"onError",function(_2d5){this._headerWidget.addErrorMessages(_2d5);});this.connect(this._listWidget,"onSuccess",function(_2d6){this._headerWidget.addSuccessMessages(_2d6);});this.connect(this._listWidget,"onModuleActionPerformed",function(){this._headerWidget.clearErrorMessages();this._headerWidget.clearSuccessMessages();});this.inherited(arguments);},updateView:function(){this._headerWidget.clearErrorMessages();this._headerWidget.clearSuccessMessages();this._headerWidget.updateView();this._listWidget.updateView();}});});},"epi-packaging/UploadSection":function(){define(["dojo","dijit","dijit/layout/_LayoutWidget","dijit/_TemplatedMixin","epi-packaging/SectionHeader","epi-packaging/PackageUpload","dojo/text!./templates/Section.htm","epi/i18n!epi/packaging/nls/EPiServer.Packaging.UI.PackageUpload"],function(dojo,_2d7,_2d8,_2d9,_2da,_2db,_2dc,res){return dojo.declare([_2d8,_2d9],{res:res,templateString:_2dc,antiForgeryData:null,_headerWidget:null,_uploadWidget:null,_packageUpload:null,startup:function(){if(this._started){return;}this._headerWidget=new _2da({webHelpAlias:"uploadaddon",antiForgeryData:this.antiForgeryData,sectionTitle:this.res.uploadtitle},this._headerPlaceholder);this._headerWidget.startup();this._packageUpload=new _2db({antiForgeryData:this.antiForgeryData},this._contentPlaceholder);this._packageUpload.startup();this.connect(this._packageUpload,"onSiteRestartRequired",function(){this._headerWidget.updateView();});this.connect(this._packageUpload,"onError",function(_2dd){this._headerWidget.addErrorMessages(_2dd);});this.connect(this._packageUpload,"onSuccess",function(_2de){this._headerWidget.addSuccessMessages(_2de);});this.connect(this._packageUpload,"onModuleActionPerformed",function(){this._headerWidget.clearErrorMessages();this._headerWidget.clearSuccessMessages();});this.inherited(arguments);},updateView:function(){this._packageUpload.updateView();this._headerWidget.clearErrorMessages();this._headerWidget.clearSuccessMessages();this._headerWidget.updateView();}});});}}});