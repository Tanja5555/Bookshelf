//>>built
require({cache:{"url:epi-packaging/templates/ModuleSummary.htm":"<div data-dojo-attach-event=\"ondijitclick:_moreInfoClick\" data-dojo-attach-point=\"moduleItemContainer\">\r\n    <div class=\"epi-browserWindow\"><div class=\"epi-browserWindowContent\" data-dojo-attach-point=\"moduleIcon\">${emptyIconTemplate}</div></div>\r\n    <h3 data-dojo-attach-point=\"nameNode\">${module.titleWithVersion}</h3>\r\n    <p data-dojo-attach-point=\"updateIndicatorContainer\"><span class=\"epi-newContentNotification\">${res.newerversionavailablemessage}</span><span data-dojo-attach-point=\"updateIndicatorVersion\"></span></p>\r\n    <p data-dojo-attach-point=\"disabledIndicatorContainer\"><span class=\"epi-packaging-indicator epi-packaging-indicator--disabled\">${res.disabledmessage}</span></p>\r\n    <p data-dojo-attach-point=\"descriptionNode\">${module.description}</p><p><a href=\"#details\" data-dojo-attach-event=\"ondijitclick:_moreInfoClick\">${res.moreinformation}</a></p>\r\n\r\n    <p data-dojo-attach-point=\"dependenciesList\"><strong class=\"label\">${res.dependencies} </strong></p>\r\n    <p data-dojo-attach-point=\"tagList\"><strong class=\"label\">${res.tags} </strong></p>\r\n    <p data-dojo-attach-point=\"installInfoBlock\"></p>\r\n    <div data-dojo-attach-point=\"errorList\" data-dojo-type=\"epi-packaging/StatusMessageList\" class=\"epi-advancedListingError\"></div>\r\n    <input type=\"button\" data-dojo-type=\"dijit/form/Button\" label=\"${res.buttoninstalllabel}\" title=\"${res.buttoninstalllabel} ${module.titleWithVersion}\" class=\"moduleActionButton\" data-dojo-attach-event=\"onClick:_installClick\" data-dojo-attach-point=\"InstallButton\" />\r\n    <input type=\"button\" data-dojo-type=\"dijit/form/Button\" label=\"${res.buttonupdatelabel}\" title=\"${res.buttonupdatelabel} ${module.titleWithVersion}\" class=\"moduleActionButton\" data-dojo-attach-event=\"onClick:_updateClick\" data-dojo-attach-point=\"UpdateButton\" />\r\n    <input type=\"button\" data-dojo-type=\"dijit/form/Button\" label=\"${res.buttonenablelabel}\" title=\"${res.buttonenablelabel} ${module.titleWithVersion}\" class=\"moduleActionButton\" data-dojo-attach-event=\"onClick:_enableClick\" data-dojo-attach-point=\"EnableButton\" />\r\n    <input type=\"button\" data-dojo-type=\"dijit/form/Button\" label=\"${res.buttondisablelabel}\" title=\"${res.buttondisablelabel} ${module.titleWithVersion}\" class=\"moduleActionButton\" data-dojo-attach-event=\"onClick:_disableClick\" data-dojo-attach-point=\"DisableButton\" />\r\n    <input type=\"button\" data-dojo-type=\"dijit/form/Button\" label=\"${res.buttonuninstalllabel}\" title=\"${res.buttonuninstalllabel} ${module.titleWithVersion}\" class=\"moduleActionButton\" data-dojo-attach-event=\"onClick:_uninstallClick\" data-dojo-attach-point=\"UninstallButton\" />\r\n</div>"}});define("epi-packaging/ModuleSummary",["dojo","dojo/_base/event","dojo/dom-class","dojo/string","dijit","dijit/_Widget","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojox/widget/Standby","epi/datetime","epi/routes","epi/shell/XhrWrapper","epi/shell/widget/dialog/Confirmation","epi/shell/widget/dialog/Dialog","epi-packaging/DetailedView","epi-packaging/StatusMessageList","dojo/text!./templates/ModuleSummary.htm","epi/i18n!epi/packaging/nls/EPiServer.Packaging.UI.ModuleSummary"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a,_b,_c,_d,_e,_f,_10,_11,res){return _1.declare([_6,_7,_8],{res:res,templateString:_11,antiForgeryData:null,module:null,iconTemplate:"<img src=\"${0}\" class=\"epi-preview\" />",emptyIconTemplate:"<div class=\"epi-noPreviewIcon\"></div>",_moduleStandby:null,constructor:function(){this.uninstallUrl=_b.getActionPath({moduleArea:"EPiServer.Packaging.UI",controller:"AddOns",action:"UninstallModule"});this.installUrl=_b.getActionPath({moduleArea:"EPiServer.Packaging.UI",controller:"AddOns",action:"InstallModule"});this.updateUrl=_b.getActionPath({moduleArea:"EPiServer.Packaging.UI",controller:"AddOns",action:"UpdateModule"});this.enableUrl=_b.getActionPath({moduleArea:"EPiServer.Packaging.UI",controller:"AddOns",action:"EnableModule"});this.disableUrl=_b.getActionPath({moduleArea:"EPiServer.Packaging.UI",controller:"AddOns",action:"DisableModule"});this._xhr=new _c();},postCreate:function(){this.inherited(arguments);this.connect(this.InstallButton.domNode,"click",function(e){_2.stop(e);});this.connect(this.UpdateButton.domNode,"click",function(e){_2.stop(e);});this.connect(this.UninstallButton.domNode,"click",function(e){_2.stop(e);});this.connect(this.DisableButton.domNode,"click",function(e){_2.stop(e);});this.connect(this.EnableButton.domNode,"click",function(e){_2.stop(e);});},startup:function(){this.updateView();this.inherited(arguments);},onInstall:function(_12){},onInstallError:function(_13){},onUpdate:function(_14){},onUpdateError:function(_15){},onUninstall:function(_16){},onUninstallError:function(_17){},onEnable:function(_18){},onEnableError:function(_19){},onDisable:function(_1a){},onDisableError:function(_1b){},updateView:function(){this._setButtonVisibility();this._createDependencies();this._createTags();if(this.module.installedBy!=""){var _1c=_a.toUserFriendlyHtml(this.module.installDate);var _1d="Installed on "+_1c+" by "+this.module.installedBy;this.installInfoBlock.innerHTML=_1d;}else{_1.destroy(this.installInfoBlock);}this.set("icon",this.module.iconUrl);this._showErrors();},_setIconAttr:function(_1e){if(_1e){this.moduleIcon.innerHTML=_4.substitute(this.iconTemplate,[_1e]);}else{this.moduleIcon.innerHTML=this.emptyIconTemplate;}},_setButtonVisibility:function(){_1.style(this.InstallButton.domNode,"display","none");_1.style(this.UninstallButton.domNode,"display","none");_1.style(this.UpdateButton.domNode,"display","none");_1.style(this.updateIndicatorContainer,"display","none");_1.style(this.EnableButton.domNode,"display","none");_1.style(this.DisableButton.domNode,"display","none");_1.style(this.disabledIndicatorContainer,"display","none");_1.removeClass(this.moduleItemContainer,"disabledItem");if(this.module.isInstalled){_1.style(this.InstallButton.domNode,"display","inline-block");this.InstallButton.set("disabled",true);}if(this.module.actionsAvailable.install&&!this.module.actionsAvailable.installAsUpdate){_1.style(this.InstallButton.domNode,"display","inline-block");}if(this.module.actionsAvailable.enable){_1.style(this.EnableButton.domNode,"display","inline-block");}if(this.module.actionsAvailable.installAsUpdate){_1.style(this.UpdateButton.domNode,"display","inline-block");}if(this.module.isDisabled){_1.style(this.disabledIndicatorContainer,"display","inline-block");_1.addClass(this.moduleItemContainer,"disabledItem");}},_createTags:function(){_1.forEach(this.module.tags,function(tag,i){var _1f=_1.create("span");_3.add(_1f,"epi-valueItem");this.tagList.appendChild(_1f);_1f.innerHTML=tag;},this);},_createDependencies:function(){_1.forEach(this.module.dependencies,function(_20,i){var _21=_1.create("span");_3.add(_21,"epi-valueItem");this.dependenciesList.appendChild(_21);_21.innerHTML=_20.name;},this);},_showErrors:function(){this.errorList.clearMessages();if(this.module.errors&&this.module.errors.length){this.errorList.addMessages(this.module.errors);}},_uninstallClick:function(e){this._showConfirmationDialog(this.res.uninstallconfirmation,_1.hitch(this,function(_22){if(_22){this._uninstallModule();}}));},_installClick:function(e){this._showConfirmationDialog(this.res.installconfirmation,_1.hitch(this,function(_23){if(_23){this._installModule();}}));},_updateClick:function(e){this._showConfirmationDialog(this.res.updateconfirmation,_1.hitch(this,function(_24){if(_24){this._updateModule();}}));},_moreInfoClick:function(e){_2.stop(e);var _25=this;var _26=new _e({content:new _f({currentPackage:this.module,installHandler:_1.hitch(_26,function(){_25._showConfirmationDialog(_25.res.installconfirmation,_1.hitch(_26,function(_27){if(_27){this.hide();_25._installModule();}}));}),updateHandler:_1.hitch(_26,function(){_25._showConfirmationDialog(_25.res.updateconfirmation,_1.hitch(_26,function(_28){if(_28){this.hide();_25._updateModule();}}));}),unInstallHandler:_1.hitch(_26,function(){_25._showConfirmationDialog(_25.res.uninstallconfirmation,_1.hitch(_26,function(_29){if(_29){this.hide();_25._uninstallModule();}}));}),enableHandler:_1.hitch(_26,function(){_25._showConfirmationDialog(_25.res.enableconfirmation,_1.hitch(_26,function(_2a){if(_2a){this.hide();_25._enableModule();}}));}),disableHandler:_1.hitch(_26,function(){_25._showConfirmationDialog(_25.res.disableconfirmation,_1.hitch(_26,function(_2b){if(_2b){this.hide();_25._disableModule();}}));}),closeHandler:_1.hitch(_26,function(){_26.hide();})}),title:this.module.title,destroyOnHide:true,defaultActionsVisible:false});_26.show();},_enableClick:function(e){this._showConfirmationDialog(this.res.enableconfirmation,_1.hitch(this,function(_2c){if(_2c){this._enableModule();}}));},_disableClick:function(e){this._showConfirmationDialog(this.res.disableconfirmation,_1.hitch(this,function(_2d){if(_2d){this._disableModule();}}));},_installModule:function(){this._showStandby();var _2e={id:this.module.id,version:this.module.version};this.antiForgeryData.AddAntiforgeryToken(_2e);this._xhr.xhrPost({content:_2e,url:this.installUrl,handleAs:"json",load:_1.hitch(this,function(_2f){this.module=_2f;this._setButtonVisibility();this._moduleStandby.hide();if(this.module.errors&&this.module.errors.length){this._showErrors();this.onInstallError(this);}else{this.onInstall(this);}}),error:_1.hitch(this,function(err,_30){this._moduleStandby.hide();_1.publish("onServerError",[_30]);})});},_updateModule:function(){this._showStandby();var _31={id:this.module.id,version:this.module.versionLatestAvailable};this.antiForgeryData.AddAntiforgeryToken(_31);this._xhr.xhrPost({content:_31,url:this.updateUrl,handleAs:"json",load:_1.hitch(this,function(_32){this.module=_32;this._setButtonVisibility();this._moduleStandby.hide();if(this.module.errors&&this.module.errors.length){this._showErrors();this.onUpdateError(this);}else{this.onUpdate(this);}}),error:_1.hitch(this,function(err,_33){this._moduleStandby.hide();_1.publish("onServerError",[_33]);})});},_uninstallModule:function(){this._showStandby();var _34={id:this.module.id,version:this.module.version};this.antiForgeryData.AddAntiforgeryToken(_34);this._xhr.xhrPost({content:_34,url:this.uninstallUrl,handleAs:"json",load:_1.hitch(this,function(_35){this.module=_35;this._setButtonVisibility();this._moduleStandby.hide();if(this.module.errors&&this.module.errors.length){this._showErrors();this.onUninstallError(this);}else{this.onUninstall(this);}}),error:_1.hitch(this,function(err,_36){this._moduleStandby.hide();_1.publish("onServerError",[_36]);})});},_enableModule:function(){this._showStandby();var _37={id:this.module.id,version:this.module.version};this.antiForgeryData.AddAntiforgeryToken(_37);this._xhr.xhrPost({content:_37,url:this.enableUrl,handleAs:"json",load:_1.hitch(this,function(_38){this.module=_38;this._setButtonVisibility();this._moduleStandby.hide();if(this.module.errors&&this.module.errors.length){this._showErrors();this.onEnableError(this);}else{this.onEnable(this);}}),error:_1.hitch(this,function(err,_39){this._moduleStandby.hide();_1.publish("onServerError",[_39]);})});},_disableModule:function(){this._showStandby();var _3a={id:this.module.id,version:this.module.version};this.antiForgeryData.AddAntiforgeryToken(_3a);this._xhr.xhrPost({content:_3a,url:this.disableUrl,handleAs:"json",load:_1.hitch(this,function(_3b){this.module=_3b;this._setButtonVisibility();this._moduleStandby.hide();if(this.module.errors&&this.module.errors.length){this._showErrors();this.onDisableError(this);}else{this.onDisable(this);}}),error:_1.hitch(this,function(err,_3c){this._moduleStandby.hide();_1.publish("onServerError",[_3c]);})});},_showStandby:function(){if(!this._moduleStandby){this._moduleStandby=new _9({target:this.domNode});document.body.appendChild(this._moduleStandby.domNode);this._moduleStandby.startup();}this._moduleStandby.show();},_showConfirmationDialog:function(_3d,_3e){var _3f=new _d({description:_1.replace(_3d,{name:this.module.title,version:this.module.version}),title:this.res.confirmationdialogtitle,onAction:_3e});_3f.show();}});});