//>>built
require({cache:{"url:epi-cms/content-approval/templates/ApprovalComponent.html":"<div class=\"epi-content-approval\">\n    <div class=\"epi-localToolbar epi-viewHeaderContainer\" data-dojo-type=\"dijit/Toolbar\">\n        <div class=\"epi-toolbarGroupContainer\">\n            <div class=\"epi-toolbarGroup epi-toolbarLeading\">\n                <div data-dojo-attach-point=\"breadcrumb\" data-dojo-type=\"epi-cms/widget/Breadcrumb\"></div>\n            </div>\n            <div class=\"epi-toolbarGroup epi-toolbarTrailing\" data-dojo-attach-point=\"commandNode\">\n                <div data-dojo-attach-point=\"validation\" data-dojo-type=\"epi-cms/widget/NotificationStatusBar\"></div>\n            </div>\n        </div>\n    </div>\n    <div data-dojo-attach-point=\"containerNode\" class=\"epi-content-approval__container\">\n        <div class=\"epi-content-approval__header\">\n            <h1>${resources.title}</h1>\n            <p>\n                ${resources.instructions.part1}\n                <em>${resources.instructions.part2}</em>\n                ${resources.instructions.part3}\n            </p>\n            <p>${resources.instructions.part4}</p>\n            <div class=\"epi-content-approval__settings\">\n                <span class=\"dijitInline\">\n                    <input id=\"enable-approval\" data-dojo-attach-point=\"enableButton\" data-dojo-type=\"dijit/form/RadioButton\">\n                    <label class=\"dijitInline\" for=\"enable-approval\">${resources.enabled}</label>\n                </span>\n                <span class=\"dijitInline\">\n                    <input id=\"inherit-approval\" data-dojo-attach-point=\"inheritButton\" data-dojo-type=\"dijit/form/RadioButton\">\n                    <label class=\"dijitInline\" for=\"inherit-approval\">${resources.inherited}</label>\n                </span>\n                <span class=\"dijitInline\">\n                    <input id=\"disabled-approval\" data-dojo-attach-point=\"disableButton\" data-dojo-type=\"dijit/form/RadioButton\">\n                    <label class=\"dijitInline\" for=\"disabled-approval\">${resources.disabled}</label>\n                </span>\n            </div>\n        </div>\n        <div class=\"epi-content-approval__disabled-warning\" data-dojo-attach-point=\"disabledWarningNode\">\n            ${resources.disabledwarning}\n        </div>\n        <div class=\"epi-content-approval__filter\" data-dojo-attach-point=\"filterNode\">\n            <span class=\"dijitInline\">${resources.languagefilter.description}</span>\n            <div data-dojo-attach-point=\"languageFilter\" data-dojo-type=\"dijit/form/Select\" class=\"epi-chromeless epi-chromeless--with-arrow epi-visibleLink\"></div>\n        </div>\n        <div data-dojo-attach-point=\"stepList\" data-dojo-type=\"epi-cms/content-approval/ApprovalStepList\"></div>\n    </div>\n</div>\n"}});define("epi-cms/content-approval/ApprovalComponent",["dojo/_base/lang","dojo/_base/declare","dojo/Deferred","dojo/dom-style","epi/shell/DialogService","epi/shell/command/builder/ButtonBuilder","epi/shell/widget/dialog/Confirmation","epi-cms/content-approval/ApprovalDefinitionStatus","epi-cms/content-approval/viewmodels/ContentApprovalViewModel","dijit/layout/_LayoutWidget","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","epi/shell/widget/_ModelBindingMixin","dojo/text!./templates/ApprovalComponent.html","epi/i18n!epi/nls/episerver.cms.contentapproval.component","epi/i18n!epi/nls/episerver.shared.action","dijit/Toolbar","dijit/form/RadioButton","dijit/form/Select","epi-cms/widget/Breadcrumb","epi-cms/widget/NotificationStatusBar","epi-cms/content-approval/ApprovalStepList"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a,_b,_c,_d,_e,_f,_10){return _2([_a,_b,_c,_d],{templateString:_e,languageWarningTemplate:" <span class='dijitInline dijitReset dijitIcon epi-iconWarning' title='"+_f.languagefilter.warningmessage+"'></span>",resources:_f,modelBindingMap:{currentContentLink:["breadcrumbContentLink","notificationContext"],isReadOnly:["isReadOnly"],filterOptions:["filterOptions"],status:["status"]},postMixInProperties:function(){this.inherited(arguments);this.model=this.model||new _9();this.own(this.model);},buildRendering:function(){this.inherited(arguments);var _11=new _6(),_12=this.model.get("commands");_12.forEach(function(_13){_11.create(_13,this.commandNode);},this);},postCreate:function(){this.inherited(arguments);this.stepList.set("model",this.model);this.own(this.enableButton.on("click",this._updateStatus.bind(this,_8.enabled)),this.disableButton.on("click",this._updateStatus.bind(this,_8.disabled)),this.inheritButton.on("click",this._updateStatus.bind(this,_8.inheritEnabled)),this.languageFilter.on("change",this._updateSelectedLanguage.bind(this)));},_isEnabled:function(){return this.status===_8.enabled||this.status===_8.inheritEnabled;},_updateSelectedLanguage:function(_14){this.model.set("selectedLanguage",_14);},_setNotificationContextAttr:function(){this.validation.set("notificationContext",{contextTypeName:"epi.cms.approval",contextId:this.model.currentContentLink});},_setBreadcrumbContentLinkAttr:function(){this.breadcrumb.set("contentLink",this.model.currentContentLink);},_setStatusAttr:function(_15){this._set("status",_15);this.enableButton.set("checked",_15===_8.enabled);this.disableButton.set("checked",_15===_8.disabled);this.inheritButton.set("checked",_15===_8.inheritEnabled||_15===_8.inheritDisabled);var _16=this._isEnabled();_4.set(this.stepList.domNode,"display",_16?"":"none");_4.set(this.filterNode,"display",_16&&!!this.model.get("filterOptions")?"":"none");_4.set(this.disabledWarningNode,"display",_16?"none":"");},_setIsReadOnlyAttr:function(_17){this._set("isReadOnly",_17);this.enableButton.set("disabled",_17);this.disableButton.set("disabled",_17);this.inheritButton.set("disabled",_17);},_setFilterOptionsAttr:function(_18){var _19=!!_18&&this._isEnabled();_4.set(this.filterNode,"display",_19?"":"none");if(!_18){return;}_18=_1.clone(_18);var _1a=this.model.get("selectedLanguage")||"";_18.forEach(function(_1b){if(!_1b.isValid&&this.model.get("showValidations")){_1b.label+=this.languageWarningTemplate;}_1b.selected=_1a===_1b.value;},this);this.languageFilter.set("options",_18);this.languageFilter.set("value",_1a);},_updateStatus:function(_1c){var _1d;switch(_1c){case _8.inheritEnabled:case _8.inheritDisabled:_1d=this._confirmInherit();break;case _8.enabled:this.model.enable();_1d=new _3().resolve();break;case _8.disabled:_1d=this._confirmDisable();break;}_1d.otherwise(this.set.bind(this,"status",this.status));},_confirmDisable:function(){var _1e={title:this.resources.disable.title,description:this.resources.disable.description,confirmActionText:_10.disable,cancelActionText:_10.cancel};return _5.confirmation(_1e).then(this.model.disable.bind(this.model));},_confirmInherit:function(){var _1f={title:this.resources.inherit.title,description:this.resources.inherit.description,confirmActionText:this.resources.inherit.okbutton,cancelActionText:_10.cancel,setFocusOnConfirmButton:false};return _5.confirmation(_1f).then(this.model.inheritDefinition.bind(this.model));}});});